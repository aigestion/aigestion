import{j as e}from"./ui.DGIYQTaI.js";import{d as s}from"./daniela-api.service.CZGrpgZ9.js";import{c as a}from"./main.UATqj3zL.js";import{r as n}from"./vendor.SlK7pBj5.js";const r={messages:[],isConnected:!1,isTyping:!1,isSpeaking:!1,volume:0,error:null,config:{variant:"assistant",context:"website",voice:{enabled:!0,provider:"vapi",voiceId:"EXAVITQu4vr4xnSDxMaL",autoStart:!1},personality:{mode:"professional",language:"es",name:"Daniela"},features:{memory:!0,analytics:!0,multiUser:!1,realTime:!0}}};function t(e,s){switch(s.type){case"ADD_MESSAGE":return{...e,messages:[...e.messages,s.payload]};case"SET_TYPING":return{...e,isTyping:s.payload};case"SET_SPEAKING":return{...e,isSpeaking:s.payload.speaking,volume:s.payload.volume||e.volume};case"SET_CONNECTED":return{...e,isConnected:s.payload};case"SET_ERROR":return{...e,error:s.payload};case"CLEAR_MESSAGES":return{...e,messages:[]};case"UPDATE_CONFIG":return{...e,config:{...e.config,...s.payload}};default:return e}}const i=createContext(null),o=({children:a,config:n})=>{const[o,d]=useReducer(t,{...r,config:n?{...r.config,...n}:r.config}),c={state:o,sendMessage:async e=>{const a={id:`user-${Date.now()}`,text:e,sender:"user",timestamp:new Date};d({type:"ADD_MESSAGE",payload:a}),d({type:"SET_TYPING",payload:!0});try{const a=await s.chat(e,"website-user",`session-${Date.now()}`),n={id:`daniela-${Date.now()}`,text:a.response,sender:"daniela",timestamp:new Date,suggestions:["Saber mÃ¡s sobre AIGestion","Ver casos de Ã©xito","Contactar con experto"],sentiment:a.sentiment||"neutral",confidence:a.confidence||1};d({type:"ADD_MESSAGE",payload:n})}catch(n){d({type:"SET_ERROR",payload:"Error al enviar mensaje"})}finally{d({type:"SET_TYPING",payload:!1})}},clearMessages:()=>{d({type:"CLEAR_MESSAGES"})},updateConfig:e=>{d({type:"UPDATE_CONFIG",payload:e})},setTyping:e=>{d({type:"SET_TYPING",payload:e})},setSpeaking:(e,s=0)=>{d({type:"SET_SPEAKING",payload:{speaking:e,volume:s}})}};return e.jsx(i.Provider,{value:c,children:a})},d=({config:s,className:a="",children:n})=>{const{state:r}=(()=>{const e=useContext(i);if(!e)throw new Error("useDaniela must be used within DanielaProvider");return e})();return e.jsx("div",{className:`daniela-core ${a}`,children:e.jsx("div",{className:"daniela-container",children:n||e.jsxs("div",{className:"daniela-default",children:[e.jsx("div",{className:"daniela-status",children:e.jsx("span",{className:"status-indicator "+(r.isConnected?"connected":"disconnected"),children:r.isConnected?"ðŸŸ¢ En lÃ­nea":"ðŸŸ¡ Modo demo"})}),e.jsxs("div",{className:"daniela-messages",children:[r.messages.map(s=>e.jsxs("div",{className:`message ${s.sender}`,children:[e.jsxs("strong",{children:["daniela"===s.sender?"ðŸ§  Daniela":"ðŸ‘¤ TÃº",":"]}),e.jsx("p",{children:s.text}),s.suggestions&&e.jsx("div",{className:"suggestions",children:s.suggestions.map((s,a)=>e.jsx("button",{className:"suggestion-btn",children:s},a))})]},s.id)),r.isTyping&&e.jsxs("div",{className:"message daniela typing",children:[e.jsx("strong",{children:"ðŸ§  Daniela:"}),e.jsx("span",{className:"typing-indicator",children:"Escribiendo..."})]})]})]})})})},c=({config:s,className:a,children:n})=>e.jsx(o,{config:s,children:e.jsx(d,{config:s,className:a,children:n})});function l({className:s,variant:n="default",...r}){return e.jsx("div",{className:a("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[n],s),...r})}const m=n.forwardRef(({className:s,...n},r)=>e.jsx("div",{ref:r,className:a("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n}));m.displayName="Card";const p=n.forwardRef(({className:s,...n},r)=>e.jsx("div",{ref:r,className:a("flex flex-col space-y-1.5 p-6",s),...n}));p.displayName="CardHeader";const u=n.forwardRef(({className:s,...n},r)=>e.jsx("h3",{ref:r,className:a("text-2xl font-semibold leading-none tracking-tight",s),...n}));u.displayName="CardTitle";n.forwardRef(({className:s,...n},r)=>e.jsx("p",{ref:r,className:a("text-sm text-muted-foreground",s),...n})).displayName="CardDescription";const g=n.forwardRef(({className:s,...n},r)=>e.jsx("div",{ref:r,className:a("p-6 pt-0",s),...n}));g.displayName="CardContent";n.forwardRef(({className:s,...n},r)=>e.jsx("div",{ref:r,className:a("flex items-center p-6 pt-0",s),...n})).displayName="CardFooter";export{l as B,m as C,c as D,p as a,u as b,g as c};
