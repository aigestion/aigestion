---
description: Deploy the full AIGestion stack (Frontend, Backend, ML-Service) to production
---

# Deploy All Workflow

This workflow handles the deployment of all services to the production environment.

## Prerequisites

- [ ] Docker installed and running
- [ ] Google Cloud SDK (`gcloud`) authenticated
- [ ] Kubernetes CLI (`kubectl`) installed
- [ ] Access to production secrets

## Steps

### 1. Verification

// turbo

1. Run the test suite to ensure stability.
   ```bash
   pnpm test
   ```

### 2. Build Docker Images

// turbo 2. Build the backend image.

```bash
docker build -t backend ./backend
```

// turbo 3. Build the frontend image.

```bash
docker build -t frontend ./frontend
```

// turbo 4. Build the ML service image.

```bash
docker build -t ml-service ./ml-service
```

### 3. Push to Registry

5. Tag and push images to Google Container Registry (GCR).

   ```bash
   docker tag backend gcr.io/$GCP_PROJECT/backend:latest
   docker push gcr.io/$GCP_PROJECT/backend:latest

   docker tag frontend gcr.io/$GCP_PROJECT/frontend:latest
   docker push gcr.io/$GCP_PROJECT/frontend:latest

   docker tag ml-service gcr.io/$GCP_PROJECT/ml-service:latest
   docker push gcr.io/$GCP_PROJECT/ml-service:latest
   ```

### 4. Deploy to Kubernetes

6. Apply Kubernetes manifests.
   ```bash
   gcloud container clusters get-credentials $GKE_CLUSTER --region $GKE_REGION
   kubectl apply -f infra/k8s/
   ```

### 5. Post-Deployment

7. Verify rollout status.
   ```bash
   kubectl rollout status deployment/backend
   kubectl rollout status deployment/frontend
   ```
8. Run smoke tests on the production URL.

---

_Generated by Antigravity - God Mode Optimization_
