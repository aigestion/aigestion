6c733c2f99279ea5f859cc318683d3d2
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.EconomyChartService = void 0;
const inversify_1 = require("inversify");
let EconomyChartService = class EconomyChartService {
    sparklineChars = [' ', 'â–‚', 'â–ƒ', 'â–„', 'â–…', 'â–†', 'â–‡', 'â–ˆ'];
    /**
     * Generates an ASCII sparkline for a set of numeric values
     */
    generateSparkline(values) {
        if (values.length === 0)
            return '';
        const min = Math.min(...values);
        const max = Math.max(...values);
        const range = max - min;
        if (range === 0)
            return this.sparklineChars[4].repeat(values.length);
        return values
            .map(v => {
            const scaled = (v - min) / range;
            const index = Math.floor(scaled * (this.sparklineChars.length - 1));
            return this.sparklineChars[index];
        })
            .join('');
    }
    /**
     * Generates a more detailed trend message
     */
    async generateTrendReport(symbol, prices) {
        if (prices.length < 2)
            return `âŒ No hay suficientes datos para ${symbol}`;
        const sparkline = this.generateSparkline(prices);
        const first = prices[0];
        const last = prices[prices.length - 1];
        const change = ((last - first) / first) * 100;
        const emoji = change >= 0 ? 'ðŸ“ˆ' : 'ðŸ“‰';
        return `ðŸ“Š *Tendencia ${symbol} (Ãšltimos 10 dÃ­as)*\n` +
            `${sparkline}\n` +
            `${emoji} Cambio: *${change >= 0 ? '+' : ''}${change.toFixed(2)}%*\n` +
            `ðŸ’° Actual: *$${last.toLocaleString()}*`;
    }
};
exports.EconomyChartService = EconomyChartService;
exports.EconomyChartService = EconomyChartService = __decorate([
    (0, inversify_1.injectable)()
], EconomyChartService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcZWNvbm9teS1jaGFydC5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLHlDQUF1QztBQUloQyxJQUFNLG1CQUFtQixHQUF6QixNQUFNLG1CQUFtQjtJQUNiLGNBQWMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUUzRTs7T0FFRztJQUNILGlCQUFpQixDQUFDLE1BQWdCO1FBQ2hDLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQUUsT0FBTyxFQUFFLENBQUM7UUFFbkMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDO1FBQ2hDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztRQUNoQyxNQUFNLEtBQUssR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBRXhCLElBQUksS0FBSyxLQUFLLENBQUM7WUFBRSxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVyRSxPQUFPLE1BQU07YUFDVixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDUCxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDakMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUM7YUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDZCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsbUJBQW1CLENBQUMsTUFBYyxFQUFFLE1BQWdCO1FBQ3hELElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQUUsT0FBTyxtQ0FBbUMsTUFBTSxFQUFFLENBQUM7UUFFMUUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pELE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QixNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QyxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM5QyxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUV4QyxPQUFPLGlCQUFpQixNQUFNLHVCQUF1QjtZQUM5QyxHQUFHLFNBQVMsSUFBSTtZQUNoQixHQUFHLEtBQUssYUFBYSxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNO1lBQ3JFLGdCQUFnQixJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQztJQUNsRCxDQUFDO0NBQ0YsQ0FBQTtBQXpDWSxrREFBbUI7OEJBQW5CLG1CQUFtQjtJQUQvQixJQUFBLHNCQUFVLEdBQUU7R0FDQSxtQkFBbUIsQ0F5Qy9CIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQWxlamFuZHJvXFxBSUdlc3Rpb25cXGJhY2tlbmRcXHNyY1xcc2VydmljZXNcXGVjb25vbXktY2hhcnQuc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbmplY3RhYmxlIH0gZnJvbSAnaW52ZXJzaWZ5JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5cbkBpbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBFY29ub215Q2hhcnRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBzcGFya2xpbmVDaGFycyA9IFsnICcsICfiloInLCAn4paDJywgJ+KWhCcsICfiloUnLCAn4paGJywgJ+KWhycsICfilognXTtcblxuICAvKipcbiAgICogR2VuZXJhdGVzIGFuIEFTQ0lJIHNwYXJrbGluZSBmb3IgYSBzZXQgb2YgbnVtZXJpYyB2YWx1ZXNcbiAgICovXG4gIGdlbmVyYXRlU3BhcmtsaW5lKHZhbHVlczogbnVtYmVyW10pOiBzdHJpbmcge1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG5cbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbiguLi52YWx1ZXMpO1xuICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLnZhbHVlcyk7XG4gICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW47XG5cbiAgICBpZiAocmFuZ2UgPT09IDApIHJldHVybiB0aGlzLnNwYXJrbGluZUNoYXJzWzRdLnJlcGVhdCh2YWx1ZXMubGVuZ3RoKTtcblxuICAgIHJldHVybiB2YWx1ZXNcbiAgICAgIC5tYXAodiA9PiB7XG4gICAgICAgIGNvbnN0IHNjYWxlZCA9ICh2IC0gbWluKSAvIHJhbmdlO1xuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3Ioc2NhbGVkICogKHRoaXMuc3BhcmtsaW5lQ2hhcnMubGVuZ3RoIC0gMSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5zcGFya2xpbmVDaGFyc1tpbmRleF07XG4gICAgICB9KVxuICAgICAgLmpvaW4oJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIG1vcmUgZGV0YWlsZWQgdHJlbmQgbWVzc2FnZVxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVUcmVuZFJlcG9ydChzeW1ib2w6IHN0cmluZywgcHJpY2VzOiBudW1iZXJbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKHByaWNlcy5sZW5ndGggPCAyKSByZXR1cm4gYOKdjCBObyBoYXkgc3VmaWNpZW50ZXMgZGF0b3MgcGFyYSAke3N5bWJvbH1gO1xuXG4gICAgY29uc3Qgc3BhcmtsaW5lID0gdGhpcy5nZW5lcmF0ZVNwYXJrbGluZShwcmljZXMpO1xuICAgIGNvbnN0IGZpcnN0ID0gcHJpY2VzWzBdO1xuICAgIGNvbnN0IGxhc3QgPSBwcmljZXNbcHJpY2VzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGNoYW5nZSA9ICgobGFzdCAtIGZpcnN0KSAvIGZpcnN0KSAqIDEwMDtcbiAgICBjb25zdCBlbW9qaSA9IGNoYW5nZSA+PSAwID8gJ/Cfk4gnIDogJ/Cfk4knO1xuXG4gICAgcmV0dXJuIGDwn5OKICpUZW5kZW5jaWEgJHtzeW1ib2x9ICjDmmx0aW1vcyAxMCBkw61hcykqXFxuYCArXG4gICAgICAgICAgIGAke3NwYXJrbGluZX1cXG5gICtcbiAgICAgICAgICAgYCR7ZW1vaml9IENhbWJpbzogKiR7Y2hhbmdlID49IDAgPyAnKycgOiAnJ30ke2NoYW5nZS50b0ZpeGVkKDIpfSUqXFxuYCArXG4gICAgICAgICAgIGDwn5KwIEFjdHVhbDogKiQke2xhc3QudG9Mb2NhbGVTdHJpbmcoKX0qYDtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9