{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\google\\youtube-channel.service.ts","mappings":"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","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\google\\youtube-channel.service.ts"],"sourcesContent":["import { injectable } from 'inversify';\nimport * as fs from 'fs';\nimport { google } from 'googleapis';\n\nimport { env } from '../../config/env.schema';\nimport type { ChannelType, UploadOptions, YouTubeChannel } from '../../types/youtube.types';\nimport { logger } from '../../utils/logger';\n\n/**\n * Servicio para gesti贸n de m煤ltiples canales de YouTube\n */\n@injectable()\nexport class YouTubeChannelService {\n  private readonly channels: Map<ChannelType, YouTubeChannel>;\n\n  constructor() {\n    this.channels = new Map();\n    this.initializeChannels();\n  }\n\n  /**\n   * Inicializa la configuraci贸n de ambos canales\n   */\n  private initializeChannels(): void {\n    // Canal Personal (noemisanalex) - Para documentaci贸n t茅cnica\n    const personalChannel: YouTubeChannel = {\n      id: env.YOUTUBE_PERSONAL_CHANNEL_ID || '',\n      type: 'personal',\n      email: env.YOUTUBE_PERSONAL_EMAIL || 'noemisanalex@gmail.com',\n      name: 'noemisanalex',\n      description: 'Canal personal para documentaci贸n t茅cnica y desarrollo',\n      purpose: 'Documentar procesos, tutoriales t茅cnicos, y aprendizaje personal',\n      credentials: {\n        apiKey: env.YOUTUBE_API_KEY,\n        clientId: env.YOUTUBE_PERSONAL_CLIENT_ID,\n        clientSecret: env.YOUTUBE_PERSONAL_CLIENT_SECRET,\n        refreshToken: env.YOUTUBE_PERSONAL_REFRESH_TOKEN,\n      },\n    };\n\n    // Canal Empresarial (AIGestion) - Para contenido de empresa\n    const businessChannel: YouTubeChannel = {\n      id: env.YOUTUBE_BUSINESS_CHANNEL_ID || '',\n      type: 'business',\n      email: env.YOUTUBE_BUSINESS_EMAIL || 'admin@aigestion.net',\n      name: 'AIGestion',\n      description:\n        'Gesti贸n inteligente de empresas con Inteligencia Artificial. Canal oficial de AIGestion (NEXUS V1).',\n      purpose:\n        'Marketing de producto, tutoriales de automatizaci贸n, casos de 茅xito y webinars de gesti贸n avanzada.',\n      credentials: {\n        apiKey: env.YOUTUBE_API_KEY,\n        clientId: env.YOUTUBE_BUSINESS_CLIENT_ID,\n        clientSecret: env.YOUTUBE_BUSINESS_CLIENT_SECRET,\n        refreshToken: env.YOUTUBE_BUSINESS_REFRESH_TOKEN,\n      },\n    };\n\n    this.channels.set('personal', personalChannel);\n    this.channels.set('business', businessChannel);\n\n    logger.info('YouTube channels initialized');\n    logger.info(`Personal: ${personalChannel.email}`);\n    logger.info(`Business (AIGestion): ${businessChannel.email}`);\n  }\n\n  /**\n   * Obtiene el cliente OAuth2 para un canal espec铆fico\n   */\n  private getOAuth2Client(channelType: ChannelType) {\n    const channel = this.channels.get(channelType);\n    if (!channel) {\n      throw new Error(`Channel type ${channelType} not found`);\n    }\n\n    const { clientId, clientSecret, refreshToken } = channel.credentials;\n\n    if (!clientId || !clientSecret || !refreshToken) {\n      throw new Error(\n        `OAuth2 credentials incomplete for ${channelType} channel. Please configure CLIENT_ID, CLIENT_SECRET, and REFRESH_TOKEN.`,\n      );\n    }\n\n    const oauth2Client = new google.auth.OAuth2(clientId, clientSecret);\n    oauth2Client.setCredentials({ refresh_token: refreshToken });\n\n    return oauth2Client;\n  }\n\n  /**\n   * Obtiene informaci贸n del canal\n   */\n  getChannelInfo(channelType: ChannelType): YouTubeChannel {\n    const channel = this.channels.get(channelType);\n    if (!channel) {\n      throw new Error(`Channel type ${channelType} not found`);\n    }\n    return channel;\n  }\n\n  /**\n   * Verifica si un canal est谩 configurado correctamente\n   */\n  isChannelConfigured(channelType: ChannelType): boolean {\n    const channel = this.channels.get(channelType);\n    if (!channel) {\n      return false;\n    }\n\n    const { clientId, clientSecret, refreshToken } = channel.credentials;\n    return !!(clientId && clientSecret && refreshToken);\n  }\n\n  /**\n   * Sube un video a un canal espec铆fico\n   */\n  async uploadVideo(options: UploadOptions): Promise<string> {\n    const {\n      channelType,\n      filePath,\n      metadata,\n      notifySubscribers = true,\n      madeForKids = false,\n    } = options;\n\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    if (!fs.existsSync(filePath)) {\n      throw new Error(`Video file not found: ${filePath}`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    const channel = this.channels.get(channelType);\n    logger.info(`Uploading video to ${channel?.name} (${channel?.email})`);\n\n    try {\n      const response = await youtube.videos.insert({\n        part: ['snippet', 'status'],\n        notifySubscribers,\n        requestBody: {\n          snippet: {\n            title: metadata.title,\n            description: metadata.description,\n            tags: metadata.tags,\n            categoryId: metadata.categoryId,\n          },\n          status: {\n            privacyStatus: metadata.privacyStatus,\n            publishAt: metadata.publishAt,\n            selfDeclaredMadeForKids: madeForKids,\n          },\n        },\n        media: {\n          body: fs.createReadStream(filePath),\n        },\n      });\n\n      const videoId = response.data.id;\n      logger.info(`Video uploaded successfully: ${videoId}`);\n      logger.info(`URL: https://youtube.com/watch?v=${videoId}`);\n\n      return videoId || '';\n    } catch (error: any) {\n      logger.error(error, `Error uploading video to ${channelType} channel:`);\n      throw error;\n    }\n  }\n\n  /**\n   * Lista los videos de un canal\n   */\n  async listVideos(channelType: ChannelType, maxResults = 50): Promise<any[]> {\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    try {\n      const response = await youtube.search.list({\n        part: ['snippet'],\n        forMine: true,\n        type: ['video'],\n        maxResults,\n        order: 'date',\n      });\n\n      return response.data.items || [];\n    } catch (error: any) {\n      logger.error(error, `Error listing videos for ${channelType} channel:`);\n      throw error;\n    }\n  }\n\n  /**\n   * Lista las playlists de un canal\n   */\n  async listPlaylists(channelType: ChannelType, maxResults = 50): Promise<any[]> {\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    try {\n      const response = await youtube.playlists.list({\n        part: ['snippet', 'contentDetails'],\n        mine: true,\n        maxResults,\n      });\n\n      return response.data.items || [];\n    } catch (error: any) {\n      logger.error(error, `Error listing playlists for ${channelType} channel:`);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtiene estad铆sticas de un video\n   */\n  async getVideoStats(channelType: ChannelType, videoId: string): Promise<any> {\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    try {\n      const response = await youtube.videos.list({\n        part: ['statistics', 'snippet'],\n        id: [videoId],\n      });\n\n      return response.data.items?.[0] || null;\n    } catch (error: any) {\n      logger.error(error, `Error getting video stats:`);\n      throw error;\n    }\n  }\n\n  /**\n   * Crea una playlist en un canal\n   */\n  async createPlaylist(\n    channelType: ChannelType,\n    title: string,\n    description: string,\n    privacyStatus: 'public' | 'private' | 'unlisted' = 'public',\n  ): Promise<string> {\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    try {\n      const response = await youtube.playlists.insert({\n        part: ['snippet', 'status'],\n        requestBody: {\n          snippet: {\n            title,\n            description,\n          },\n          status: {\n            privacyStatus,\n          },\n        },\n      });\n\n      const playlistId = response.data.id || '';\n      logger.info(`Playlist created: ${playlistId}`);\n      return playlistId;\n    } catch (error: any) {\n      logger.error(error, `Error creating playlist:`);\n      throw error;\n    }\n  }\n\n  /**\n   * Busca una playlist por nombre\n   */\n  async findPlaylistByName(channelType: ChannelType, name: string): Promise<string | null> {\n    try {\n      const playlists = await this.listPlaylists(channelType);\n      const found = playlists.find(p =>\n        p.snippet?.title.toLowerCase().includes(name.toLowerCase()),\n      );\n      return found?.id || null;\n    } catch (error) {\n      logger.error(error, `Error finding playlist by name: ${name}`);\n      return null;\n    }\n  }\n\n  /**\n   * Busca o crea una playlist\n   */\n  async findOrCreatePlaylist(\n    channelType: ChannelType,\n    title: string,\n    description: string,\n  ): Promise<string> {\n    const existing = await this.findPlaylistByName(channelType, title);\n    if (existing) {\n      return existing;\n    }\n    return this.createPlaylist(channelType, title, description);\n  }\n\n  /**\n   * A帽ade un video a una playlist\n   */\n  async addVideoToPlaylist(\n    channelType: ChannelType,\n    videoId: string,\n    playlistId: string,\n  ): Promise<void> {\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    try {\n      await youtube.playlistItems.insert({\n        part: ['snippet'],\n        requestBody: {\n          snippet: {\n            playlistId,\n            resourceId: {\n              kind: 'youtube#video',\n              videoId,\n            },\n          },\n        },\n      });\n\n      logger.info(`Video ${videoId} added to playlist ${playlistId}`);\n    } catch (error: any) {\n      logger.error(error, `Error adding video to playlist:`);\n      throw error;\n    }\n  }\n\n  /**\n   * Configura el canal empresarial con playlists est谩ndar premium\n   */\n  async setupBusinessChannel(): Promise<{ playlistsCreated: string[] }> {\n    if (!this.isChannelConfigured('business')) {\n      throw new Error('Business channel is not properly configured');\n    }\n\n    const playlists = [\n      {\n        title: ' AIGestion: Software Demos',\n        description: 'Demostraciones detalladas de las capacidades de automatizaci贸n de AIGestion.',\n      },\n      {\n        title: ' Tutoriales de Automatizaci贸n',\n        description: 'Gu铆as paso a paso para optimizar tu empresa con Inteligencia Artificial.',\n      },\n      {\n        title: ' Casos de xito & Webinars',\n        description: 'Sesiones en directo y testimonios de transformaci贸n empresarial.',\n      },\n      {\n        title: ' NEXUS V1 Core Updates',\n        description: 'Novedades y actualizaciones t茅cnicas del motor NEXUS V1.',\n      },\n    ];\n\n    const results: string[] = [];\n\n    for (const playlist of playlists) {\n      try {\n        const id = await this.findOrCreatePlaylist(\n          'business',\n          playlist.title,\n          playlist.description,\n        );\n        results.push(`${playlist.title} (${id})`);\n      } catch (error: any) {\n        logger.error(error, `Error during setup of playlist ${playlist.title}`);\n      }\n    }\n\n    return { playlistsCreated: results };\n  }\n\n  /**\n   * Actualiza el metadata de un video (SEO)\n   */\n  async updateVideoMetadata(\n    channelType: ChannelType,\n    videoId: string,\n    metadata: {\n      title?: string;\n      description?: string;\n      tags?: string[];\n      categoryId?: string;\n    },\n  ): Promise<void> {\n    if (!this.isChannelConfigured(channelType)) {\n      throw new Error(`${channelType} channel is not properly configured`);\n    }\n\n    const auth = this.getOAuth2Client(channelType);\n    const youtube = google.youtube({ version: 'v3', auth });\n\n    try {\n      // 1. Obtener snippet actual para no sobrescribir datos que no cambiamos\n      const currentVideo = await youtube.videos.list({\n        part: ['snippet'],\n        id: [videoId],\n      });\n\n      if (!currentVideo.data.items || currentVideo.data.items.length === 0) {\n        throw new Error(`Video ${videoId} not found`);\n      }\n\n      const snippet = currentVideo.data.items[0].snippet!;\n\n      // 2. Aplicar actualizaciones\n      const updateRequest = {\n        id: videoId,\n        snippet: {\n          ...snippet,\n          title: metadata.title || snippet.title,\n          description: metadata.description || snippet.description,\n          tags: metadata.tags || snippet.tags,\n          categoryId: metadata.categoryId || snippet.categoryId,\n        },\n      };\n\n      // 3. Enviar actualizaci贸n\n      await youtube.videos.update({\n        part: ['snippet'],\n        requestBody: updateRequest,\n      });\n\n      logger.info(`Video metadata updated for ${videoId}`);\n    } catch (error: any) {\n      logger.error(error, `Error updating video metadata for ${videoId}:`);\n      throw error;\n    }\n  }\n}\n"],"version":3}