{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\history.service.ts","mappings":";;;;;;;;;AAAA,yCAAuC;AAEvC,2EAAkF;AAG3E,IAAM,cAAc,GAApB,MAAM,cAAc;IACzB;;OAEG;IACH,KAAK,CAAC,YAAY,CAAC,IAA8B;QAC/C,MAAM,QAAQ,GAAG,MAAM,sCAAc,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnD,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,UAAU,CAAC,MAAc;QAC7B,OAAO,sCAAc,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC;aACnC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;aACvB,IAAI,EAAkC,CAAC;IAC5C,CAAC;CACF,CAAA;AAjBY,wCAAc;yBAAd,cAAc;IAD1B,IAAA,sBAAU,GAAE;GACA,cAAc,CAiB1B","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\history.service.ts"],"sourcesContent":["import { injectable } from 'inversify';\n\nimport { IMetricSnapshot, MetricSnapshot } from '../models/metric-snapshot.model';\n\n@injectable()\nexport class HistoryService {\n  /**\n   * Persiste una nueva instantánea.\n   */\n  async pushSnapshot(data: Partial<IMetricSnapshot>): Promise<IMetricSnapshot> {\n    const snapshot = await MetricSnapshot.create(data);\n    return snapshot;\n  }\n\n  /**\n   * Obtiene el historial de una métrica concreta.\n   */\n  async getHistory(metric: string): Promise<IMetricSnapshot[]> {\n    return MetricSnapshot.find({ metric })\n      .sort({ timestamp: -1 })\n      .lean() as unknown as IMetricSnapshot[];\n  }\n}\n"],"version":3}