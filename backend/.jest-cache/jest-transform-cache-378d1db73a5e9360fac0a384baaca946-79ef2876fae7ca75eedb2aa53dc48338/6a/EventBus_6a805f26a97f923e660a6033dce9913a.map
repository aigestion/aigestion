{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\infrastructure\\eventbus\\EventBus.ts","mappings":";;;;;;;;;AAAA,yCAAuC;AAKhC,IAAM,QAAQ,GAAd,MAAM,QAAQ;IACX,QAAQ,GAAG,IAAI,GAAG,EAAmC,CAAC;IAEvD,SAAS,CAAmB,SAAiB,EAAE,OAAyB;QAC7E,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QACnC,CAAC;QACD,6CAA6C;QAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAE,CAAC,IAAI,CAAC,OAAgC,CAAC,CAAC;IACvE,CAAC;IAEM,KAAK,CAAC,OAAO,CAAmB,KAAQ;QAC7C,MAAM,SAAS,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC;QACzC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACpD,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACxD,CAAC;CACF,CAAA;AAhBY,4BAAQ;mBAAR,QAAQ;IADpB,IAAA,sBAAU,GAAE;GACA,QAAQ,CAgBpB","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\infrastructure\\eventbus\\EventBus.ts"],"sourcesContent":["import { injectable } from 'inversify';\nimport type { IEvent } from '../../domain/events/DomainEvent';\nimport type { IEventHandler } from '../../domain/events/IEventHandler';\n\n@injectable()\nexport class EventBus {\n  private handlers = new Map<string, IEventHandler<IEvent>[]>();\n\n  public subscribe<T extends IEvent>(eventName: string, handler: IEventHandler<T>): void {\n    if (!this.handlers.has(eventName)) {\n      this.handlers.set(eventName, []);\n    }\n    // Cast to generic IEvent handler for storage\n    this.handlers.get(eventName)!.push(handler as IEventHandler<IEvent>);\n  }\n\n  public async publish<T extends IEvent>(event: T): Promise<void> {\n    const eventName = event.constructor.name;\n    const handlers = this.handlers.get(eventName) ?? [];\n    await Promise.all(handlers.map(h => h.handle(event)));\n  }\n}\n"],"version":3}