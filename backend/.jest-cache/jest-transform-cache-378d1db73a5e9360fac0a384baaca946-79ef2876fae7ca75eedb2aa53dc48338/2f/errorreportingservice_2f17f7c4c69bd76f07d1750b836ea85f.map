{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\google\\error-reporting.service.ts","mappings":";;;;;;;;;;;;AAAA,mEAA+D;AAC/D,yCAAuC;AACvC,+CAA4C;AAC5C,gDAA6C;AAGtC,IAAM,qBAAqB,GAA3B,MAAM,qBAAqB;IACxB,MAAM,GAA0B,IAAI,CAAC;IAE7C;QACE,IAAI,eAAM,CAAC,OAAO,KAAK,YAAY,EAAE,CAAC;YACpC,IAAI,CAAC;gBACH,IAAI,CAAC,MAAM,GAAG,IAAI,gCAAc,CAAC;oBAC/B,UAAU,EAAE,QAAQ;oBACpB,cAAc,EAAE;wBACd,OAAO,EAAE,mBAAmB;wBAC5B,OAAO,EAAE,OAAO;qBACjB;iBACF,CAAC,CAAC;gBACH,eAAM,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;YAC1D,CAAC;YAAC,OAAO,GAAG,EAAE,CAAC;gBACb,eAAM,CAAC,KAAK,CAAC,mDAAmD,EAAE,GAAG,CAAC,CAAC;YACzE,CAAC;QACH,CAAC;IACH,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,GAAQ,EAAE,GAAS;QAC/B,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YAChB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC/B,CAAC;aAAM,CAAC;YACN,uDAAuD;YACvD,eAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;QAClD,CAAC;IACH,CAAC;IAED;;OAEG;IACI,eAAe,CAAC,IAAY,EAAE,OAAY;QAC/C,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,uBAAuB,IAAI,EAAE,CAAC,CAAC;QACtD,KAAa,CAAC,OAAO,GAAG,OAAO,CAAC;QAEjC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACrB,CAAC;CACF,CAAA;AAzCY,sDAAqB;gCAArB,qBAAqB;IADjC,IAAA,sBAAU,GAAE;;GACA,qBAAqB,CAyCjC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\google\\error-reporting.service.ts"],"sourcesContent":["import { ErrorReporting } from '@google-cloud/error-reporting';\nimport { injectable } from 'inversify';\nimport { logger } from '../../utils/logger';\nimport { config } from '../../config/config';\n\n@injectable()\nexport class ErrorReportingService {\n  private errors: ErrorReporting | null = null;\n\n  constructor() {\n    if (config.nodeEnv === 'production') {\n      try {\n        this.errors = new ErrorReporting({\n          reportMode: 'always',\n          serviceContext: {\n            service: 'aigestion-backend',\n            version: '1.0.0',\n          },\n        });\n        logger.info('Google Cloud Error Reporting initialized');\n      } catch (err) {\n        logger.error('Failed to initialize Google Cloud Error Reporting', err);\n      }\n    }\n  }\n\n  /**\n   * Report an error to Google Cloud\n   */\n  public report(err: any, req?: any): void {\n    if (this.errors) {\n      this.errors.report(err, req);\n    } else {\n      // Fallback for development or if initialization failed\n      logger.error('[ErrorReporting Fallback]:', err);\n    }\n  }\n\n  /**\n   * Report a specific security violation or custom event\n   */\n  public reportViolation(type: string, details: any): void {\n    const error = new Error(`Security Violation: ${type}`);\n    (error as any).details = details;\n\n    this.report(error);\n  }\n}\n"],"version":3}