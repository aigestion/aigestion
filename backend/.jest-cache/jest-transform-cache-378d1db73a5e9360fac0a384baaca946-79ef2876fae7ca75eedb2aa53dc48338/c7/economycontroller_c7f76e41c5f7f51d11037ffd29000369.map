{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\controllers\\economy.controller.ts","mappings":"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","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\controllers\\economy.controller.ts"],"sourcesContent":["import { Request, Response } from 'express';\nimport { controller, httpGet, httpPost } from 'inversify-express-utils';\nimport { inject } from 'inversify';\nimport { TYPES } from '../types';\nimport { EconomyService, AssetPrice } from '../services/economy.service';\nimport { logger } from '../utils/logger';\n\n@controller('/v1/economy')\nexport class EconomyController {\n  constructor(@inject(TYPES.EconomyService) private economyService: EconomyService) {}\n\n  @httpGet('/prices')\n  async getPrices(req: Request, res: Response): Promise<void> {\n    try {\n      const prices = await this.economyService.getEconomyUpdate();\n      res.status(200).json({ success: true, data: prices });\n    } catch (error) {\n      logger.error('[EconomyController] Error fetching prices:', error);\n      res.status(500).json({ success: false, message: 'Failed to fetch prices' });\n    }\n  }\n\n  @httpGet('/advice')\n  async getAdvice(req: Request, res: Response): Promise<void> {\n    try {\n      const advice = await this.economyService.getInvestmentAdvice();\n      res.status(200).json({ success: true, data: advice });\n    } catch (error) {\n      logger.error('[EconomyController] Error fetching advice:', error);\n      res.status(500).json({ success: false, message: 'Failed to fetch advice' });\n    }\n  }\n\n  @httpGet('/portfolio')\n  async getPortfolio(req: Request, res: Response): Promise<void> {\n    try {\n      // For the prototype, we use 'god_mode' as the userId.\n      // In production, this would come from req.user.id\n      const stats = await this.economyService.getPortfolioStats('god_mode');\n      res.status(200).json({ success: true, data: stats });\n    } catch (error) {\n      logger.error('[EconomyController] Error fetching portfolio:', error);\n      res.status(500).json({ success: false, message: 'Failed to fetch portfolio' });\n    }\n  }\n\n  @httpGet('/history/:symbol')\n  async getHistory(req: Request, res: Response): Promise<void> {\n    try {\n      const symbol = req.params.symbol as string;\n      const history = await this.economyService.getHistoricalPrices(symbol);\n      res.status(200).json({ success: true, data: history });\n    } catch (error) {\n      logger.error(`[EconomyController] Error fetching history for ${req.params.symbol}:`, error);\n      res.status(500).json({ success: false, message: 'Failed to fetch history' });\n    }\n  }\n}\n"],"version":3}