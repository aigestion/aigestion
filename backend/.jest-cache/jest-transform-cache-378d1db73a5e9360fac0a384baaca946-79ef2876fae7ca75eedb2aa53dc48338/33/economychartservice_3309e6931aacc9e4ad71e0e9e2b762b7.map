{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\economy-chart.service.ts","mappings":";;;;;;;;;AAAA,yCAAuC;AAIhC,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;IACb,cAAc,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IAE3E;;OAEG;IACH,iBAAiB,CAAC,MAAgB;QAChC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,EAAE,CAAC;QAEnC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC;QAChC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC;QAChC,MAAM,KAAK,GAAG,GAAG,GAAG,GAAG,CAAC;QAExB,IAAI,KAAK,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAErE,OAAO,MAAM;aACV,GAAG,CAAC,CAAC,CAAC,EAAE;YACP,MAAM,MAAM,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;YACjC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACpE,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC,CAAC;aACD,IAAI,CAAC,EAAE,CAAC,CAAC;IACd,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,mBAAmB,CAAC,MAAc,EAAE,MAAgB;QACxD,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC;YAAE,OAAO,mCAAmC,MAAM,EAAE,CAAC;QAE1E,MAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACjD,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACxB,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACvC,MAAM,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC;QAC9C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAExC,OAAO,iBAAiB,MAAM,uBAAuB;YAC9C,GAAG,SAAS,IAAI;YAChB,GAAG,KAAK,aAAa,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM;YACrE,gBAAgB,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC;IAClD,CAAC;CACF,CAAA;AAzCY,kDAAmB;8BAAnB,mBAAmB;IAD/B,IAAA,sBAAU,GAAE;GACA,mBAAmB,CAyC/B","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\economy-chart.service.ts"],"sourcesContent":["import { injectable } from 'inversify';\nimport { logger } from '../utils/logger';\n\n@injectable()\nexport class EconomyChartService {\n  private readonly sparklineChars = [' ', 'â–‚', 'â–ƒ', 'â–„', 'â–…', 'â–†', 'â–‡', 'â–ˆ'];\n\n  /**\n   * Generates an ASCII sparkline for a set of numeric values\n   */\n  generateSparkline(values: number[]): string {\n    if (values.length === 0) return '';\n\n    const min = Math.min(...values);\n    const max = Math.max(...values);\n    const range = max - min;\n\n    if (range === 0) return this.sparklineChars[4].repeat(values.length);\n\n    return values\n      .map(v => {\n        const scaled = (v - min) / range;\n        const index = Math.floor(scaled * (this.sparklineChars.length - 1));\n        return this.sparklineChars[index];\n      })\n      .join('');\n  }\n\n  /**\n   * Generates a more detailed trend message\n   */\n  async generateTrendReport(symbol: string, prices: number[]): Promise<string> {\n    if (prices.length < 2) return `âŒ No hay suficientes datos para ${symbol}`;\n\n    const sparkline = this.generateSparkline(prices);\n    const first = prices[0];\n    const last = prices[prices.length - 1];\n    const change = ((last - first) / first) * 100;\n    const emoji = change >= 0 ? 'ðŸ“ˆ' : 'ðŸ“‰';\n\n    return `ðŸ“Š *Tendencia ${symbol} (Ãšltimos 10 dÃ­as)*\\n` +\n           `${sparkline}\\n` +\n           `${emoji} Cambio: *${change >= 0 ? '+' : ''}${change.toFixed(2)}%*\\n` +\n           `ðŸ’° Actual: *$${last.toLocaleString()}*`;\n  }\n}\n"],"version":3}