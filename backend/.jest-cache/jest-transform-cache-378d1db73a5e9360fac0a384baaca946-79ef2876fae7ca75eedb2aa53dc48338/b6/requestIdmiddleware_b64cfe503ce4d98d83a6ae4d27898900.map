{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\middleware\\requestId.middleware.ts","mappings":";;;AAEA,8CAAkD;AAElD;;GAEG;AACI,MAAM,mBAAmB,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACrF,MAAM,SAAS,GAAG,OAAO,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;IAEjF,mCAAmC;IAClC,GAAW,CAAC,SAAS,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;IACjD,GAAW,CAAC,SAAS,GAAG,SAAS,CAAC;IAEnC,mBAAmB;IACnB,MAAM,KAAK,GAAG,IAAI,GAAG,EAAkB,CAAC;IACxC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IAElC,wBAAc,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,EAAE;QAC7B,IAAI,EAAE,CAAC;IACT,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAdW,QAAA,mBAAmB,uBAc9B","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\middleware\\requestId.middleware.ts"],"sourcesContent":["import type { NextFunction, Request, Response } from 'express';\n\nimport { requestContext } from '../utils/context';\n\n/**\n * Middleware to inject a unique X-Request-Id into every request and store it in context\n */\nexport const requestIdMiddleware = (req: Request, res: Response, next: NextFunction) => {\n  const requestId = `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n  // Set in header and request object\n  (res as any).setHeader('x-request-id', requestId);\n  (req as any).requestId = requestId;\n\n  // Store in context\n  const store = new Map<string, string>();\n  store.set('requestId', requestId);\n\n  requestContext.run(store, () => {\n    next();\n  });\n};\n"],"version":3}