{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\controllers\\exit-email.controller.ts","mappings":";;AACA,qCAAiC;AAEjC,iEAA2D;AAC3D,uEAA8E;AAE9E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,gDAAgD;AAChD;;;;;;;;;GASG;AACH,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;IAC9C,MAAM,SAAS,GAAG,IAAA,iCAAY,GAAE,CAAC;IACjC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACrC,MAAM,SAAS,GAAI,GAAW,CAAC,SAAS,CAAC;IACzC,OAAO,GAAG,CAAC,IAAI,CAAC,IAAA,gCAAa,EAAC,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;AACvE,CAAC,CAAC,CAAC;AAEH,yEAAyE;AACzE;;;;;;;;;;;;;;;;;GAiBG;AACH,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;IACnD,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAa,CAAC;IACnC,IAAI,CAAC;QACH,MAAM,OAAO,GAAG,IAAA,mCAAc,EAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,sBAAsB;QAChE,MAAM,SAAS,GAAI,GAAW,CAAC,SAAS,CAAC;QACzC,OAAO,GAAG,CAAC,IAAI,CAAC,IAAA,gCAAa,EAAC,EAAE,OAAO,EAAE,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;IAC9D,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACb,MAAM,SAAS,GAAI,GAAW,CAAC,SAAS,CAAC;QACzC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAA,gCAAa,EAAC,EAAE,KAAK,EAAG,GAAa,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;IAChG,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\controllers\\exit-email.controller.ts"],"sourcesContent":["import type { Request, Response } from 'express';\nimport { Router } from 'express';\n\nimport { buildResponse } from '../common/response-builder';\nimport { getTemplates, renderTemplate } from '../services/exit-email.service';\n\nconst router = Router();\n\n// GET /api/exit-templates - list template names\n/**\n * @openapi\n * /exit-templates:\n *   get:\n *     summary: List exit email templates\n *     tags: [ExitEmail]\n *     responses:\n *       200:\n *         description: List of template names\n */\nrouter.get('/', (req: Request, res: Response) => {\n  const templates = getTemplates();\n  const names = Object.keys(templates);\n  const requestId = (req as any).requestId;\n  return res.json(buildResponse({ templates: names }, 200, requestId));\n});\n\n// GET /api/exit-templates/:name - get raw template (placeholders intact)\n/**\n * @openapi\n * /exit-templates/{name}:\n *   get:\n *     summary: Get raw exit email template\n *     tags: [ExitEmail]\n *     parameters:\n *       - in: path\n *         name: name\n *         required: true\n *         schema:\n *           type: string\n *     responses:\n *       200:\n *         description: Template content\n *       404:\n *         description: Template not found\n */\nrouter.get('/:name', (req: Request, res: Response) => {\n  const { name } = req.params as any;\n  try {\n    const content = renderTemplate(name, {}); // no data replacement\n    const requestId = (req as any).requestId;\n    return res.json(buildResponse({ content }, 200, requestId));\n  } catch (err) {\n    const requestId = (req as any).requestId;\n    return res.status(404).json(buildResponse({ error: (err as Error).message }, 404, requestId));\n  }\n});\n\nexport default router;\n"],"version":3}