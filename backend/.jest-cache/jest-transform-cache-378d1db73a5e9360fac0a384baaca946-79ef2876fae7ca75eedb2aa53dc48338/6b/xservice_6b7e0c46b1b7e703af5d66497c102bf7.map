{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\x.service.ts","mappings":";;;;;;;;;;;;AAAA,kDAA0B;AAC1B,yCAAuC;AAEvC,qDAA2C;AAC3C,4CAAyC;AAGlC,IAAM,QAAQ,GAAd,MAAM,QAAQ;IACF,OAAO,GAAG,2BAA2B,CAAC;IAEvD;;OAEG;IACH,KAAK,CAAC,SAAS,CAAC,IAAY;QAC1B,IAAI,CAAC,gBAAG,CAAC,cAAc,EAAE,CAAC;YACxB,0EAA0E;YAC1E,eAAM,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;YAC7C,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,uBAAuB,EAAE,CAAC;QAC5D,CAAC;QAED,IAAI,CAAC;YACH,MAAM,QAAQ,GAAG,MAAM,eAAK,CAAC,IAAI,CAC/B,GAAG,IAAI,CAAC,OAAO,SAAS,EACxB;gBACE,IAAI,EAAE,IAAI;aACX,EACD;gBACE,OAAO,EAAE;oBACP,aAAa,EAAE,UAAU,gBAAG,CAAC,cAAc,EAAE,EAAE,gDAAgD;oBAC/F,cAAc,EAAE,kBAAkB;iBACnC;aACF,CACF,CAAC;YAEF,eAAM,CAAC,IAAI,CAAC,iBAAiB,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;YACvD,OAAO,QAAQ,CAAC,IAAI,CAAC;QACvB,CAAC;QAAC,OAAO,KAAU,EAAE,CAAC;YACpB,eAAM,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,IAAI,KAAK,CAAC,OAAO,EAAE,EAAE,oBAAoB,CAAC,CAAC;YACrF,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF,CAAA;AAlCY,4BAAQ;mBAAR,QAAQ;IADpB,IAAA,sBAAU,GAAE;GACA,QAAQ,CAkCpB","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\x.service.ts"],"sourcesContent":["import axios from 'axios';\nimport { injectable } from 'inversify';\n\nimport { env } from '../config/env.schema';\nimport { logger } from '../utils/logger';\n\n@injectable()\nexport class XService {\n  private readonly baseUrl = 'https://api.twitter.com/2';\n\n  /**\n   * Post a tweet using Twitter API v2\n   */\n  async postTweet(text: string): Promise<any> {\n    if (!env.X_ACCESS_TOKEN) {\n      // Note: For v2, typically OAuth 2.0 User Context (Access Token) is needed\n      logger.warn('X_ACCESS_TOKEN not configured');\n      return { success: false, error: 'Configuration missing' };\n    }\n\n    try {\n      const response = await axios.post(\n        `${this.baseUrl}/tweets`,\n        {\n          text: text,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${env.X_ACCESS_TOKEN}`, // Assuming OAuth2 Bearer Token for User Context\n            'Content-Type': 'application/json',\n          },\n        },\n      );\n\n      logger.info(`Tweet posted: ${response.data.data?.id}`);\n      return response.data;\n    } catch (error: any) {\n      logger.error({ error: error.response?.data || error.message }, 'Error posting to X');\n      throw error;\n    }\n  }\n}\n"],"version":3}