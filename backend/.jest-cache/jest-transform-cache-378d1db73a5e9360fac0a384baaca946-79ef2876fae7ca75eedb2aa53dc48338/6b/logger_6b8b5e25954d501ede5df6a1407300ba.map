{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\utils\\logger.ts","mappings":";;;;;;AAAA,sBAAsB;AACtB,gDAAwB;AACxB,uCAA2C;AAE3C,gBAAgB;AAChB,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,CAAC;AAErD,MAAM,UAAU,GAAG,IAAA,cAAI,EAAC;IACtB,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,MAAM;IACtC,8DAA8D;IAC9D,2CAA2C;IAC3C,SAAS,EAAE,KAAK;QACd,CAAC,CAAC;YACE,MAAM,EAAE,aAAa;YACrB,OAAO,EAAE;gBACP,QAAQ,EAAE,IAAI;gBACd,aAAa,EAAE,cAAc;gBAC7B,MAAM,EAAE,cAAc;aACvB;SACF;QACH,CAAC,CAAC,SAAS;IACb,KAAK;QACH,MAAM,KAAK,GAAG,wBAAc,CAAC,QAAQ,EAAE,EAAE,CAAC;QAC1C,OAAO,KAAK,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IAC5D,CAAC;CACF,CAAC,CAAC;AAEH,gEAAgE;AAChE,uCAAuC;AACvC,SAAS,IAAI,CAAC,MAA+D;IAC3E,OAAO,CAAC,IAAS,EAAE,IAAU,EAAE,GAAG,IAAW,EAAE,EAAE;QAC/C,kEAAkE;QAClE,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,CAAC;YAC7B,IAAI,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,CAAC;gBACrC,kCAAkC;gBAClC,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC;YAC1C,CAAC;iBAAM,CAAC;gBACN,QAAQ;gBACR,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC;aAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,CAAC;YAChE,kCAAkC;YAClC,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC;QAC1C,CAAC;aAAM,CAAC;YACN,WAAW;YACX,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC,CAAC;AACJ,CAAC;AAEY,QAAA,MAAM,GAAG;IACpB,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC;IAClB,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC;IACpB,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC;IAClB,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC;IACpB,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,uBAAuB;IAC/C,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,qBAAqB;CAC5C,CAAC;AAEF,kBAAe,cAAM,CAAC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\utils\\logger.ts"],"sourcesContent":["// src/utils/logger.ts\nimport pino from 'pino';\nimport { requestContext } from './context';\n\n// Configuration\nconst isDev = process.env.NODE_ENV === 'development';\n\nconst pinoLogger = pino({\n  level: process.env.LOG_LEVEL || 'info',\n  // In production, log JSON to stdout (best for Cloud Run/K8s).\n  // In dev, use pino-pretty for readability.\n  transport: isDev\n    ? {\n        target: 'pino-pretty',\n        options: {\n          colorize: true,\n          translateTime: 'SYS:standard',\n          ignore: 'pid,hostname',\n        },\n      }\n    : undefined,\n  mixin() {\n    const store = requestContext.getStore?.();\n    return store ? { requestId: store.get('requestId') } : {};\n  },\n});\n\n// Helper to support both (msg, meta) and (meta, msg) signatures\n// Compatible with Winston legacy usage\nfunction wrap(method: 'info' | 'error' | 'warn' | 'debug' | 'trace' | 'fatal') {\n  return (arg1: any, arg2?: any, ...rest: any[]) => {\n    // Determine which argument is the message and which is the object\n    if (typeof arg1 === 'string') {\n      if (arg2 && typeof arg2 === 'object') {\n        // (msg, meta) -> Pino (meta, msg)\n        pinoLogger[method](arg2, arg1, ...rest);\n      } else {\n        // (msg)\n        pinoLogger[method](arg1, arg2, ...rest);\n      }\n    } else if (typeof arg1 === 'object' && typeof arg2 === 'string') {\n      // (meta, msg) -> Pino (meta, msg)\n      pinoLogger[method](arg1, arg2, ...rest);\n    } else {\n      // Fallback\n      pinoLogger[method](arg1, arg2, ...rest);\n    }\n  };\n}\n\nexport const logger = {\n  info: wrap('info'),\n  error: wrap('error'),\n  warn: wrap('warn'),\n  debug: wrap('debug'),\n  verbose: wrap('trace'), // Map verbose to trace\n  silly: wrap('trace'), // Map silly to trace\n};\n\nexport default logger;\n"],"version":3}