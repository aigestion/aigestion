{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\utils\\aiRouter.ts","mappings":";;;AAEA,IAAY,WAIX;AAJD,WAAY,WAAW;IACrB,kCAAmB,CAAA;IACnB,oCAAqB,CAAA;IACrB,kCAAmB,CAAA;AACrB,CAAC,EAJW,WAAW,2BAAX,WAAW,QAItB;AAOD,MAAa,aAAa;IACxB;;OAEG;IACH,MAAM,CAAC,KAAK,CAAC,MAAc;QACzB,MAAM,CAAC,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;QAE/B,4CAA4C;QAC5C,MAAM,eAAe,GAAG;YACtB,SAAS;YACT,cAAc;YACd,UAAU;YACV,iBAAiB;YACjB,WAAW;YACX,UAAU;YACV,UAAU;YACV,aAAa;SACd,CAAC;QAEF,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;QACnC,MAAM,kBAAkB,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QAEpE,IAAI,MAAM,IAAI,kBAAkB,EAAE,CAAC;YACjC,OAAO,WAAW,CAAC,OAAO,CAAC;QAC7B,CAAC;QAED,uCAAuC;QACvC,MAAM,cAAc,GAAG,CAAC,MAAM,EAAE,YAAY,EAAE,cAAc,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAC9E,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QAEvC,IAAI,WAAW,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAC3D,OAAO,WAAW,CAAC,OAAO,CAAC;QAC7B,CAAC;QAED,OAAO,WAAW,CAAC,QAAQ,CAAC;IAC9B,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,cAAc,CAAC,IAAiB;QACrC,QAAQ,IAAI,EAAE,CAAC;YACb,KAAK,WAAW,CAAC,OAAO;gBACtB,+CAA+C;gBAC/C,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,EAAE,4BAA4B,EAAE,CAAC;YAC1E,KAAK,WAAW,CAAC,OAAO;gBACtB,8CAA8C;gBAC9C,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;YAChE,KAAK,WAAW,CAAC,QAAQ,CAAC;YAC1B;gBACE,uDAAuD;gBACvD,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC;QAC/D,CAAC;IACH,CAAC;CACF;AAtDD,sCAsDC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\utils\\aiRouter.ts"],"sourcesContent":["import { logger } from './logger';\n\nexport enum AIModelTier {\n  ECONOMY = 'economy',\n  STANDARD = 'standard',\n  PREMIUM = 'premium',\n}\n\nexport interface ModelConfig {\n  provider: 'gemini' | 'openai' | 'anthropic';\n  modelId: string;\n}\n\nexport class AIModelRouter {\n  /**\n   * Semantically routes a prompt to the most efficient model tier\n   */\n  static route(prompt: string): AIModelTier {\n    const p = prompt.toLowerCase();\n\n    // Heuristics for PREMIUM (Complex/Creative)\n    const complexKeywords = [\n      'analiza',\n      'arquitectura',\n      'optimiza',\n      'explica a fondo',\n      'reescribe',\n      'complejo',\n      'debuguea',\n      'paso a paso',\n    ];\n\n    const isLong = prompt.length > 500;\n    const hasComplexKeywords = complexKeywords.some(k => p.includes(k));\n\n    if (isLong || hasComplexKeywords) {\n      return AIModelTier.PREMIUM;\n    }\n\n    // Heuristics for ECONOMY (Fast/Simple)\n    const simpleKeywords = ['hola', 'quien eres', 'dime la hora', 'ping', 'test'];\n    const isVeryShort = prompt.length < 50;\n\n    if (isVeryShort || simpleKeywords.some(k => p.includes(k))) {\n      return AIModelTier.ECONOMY;\n    }\n\n    return AIModelTier.STANDARD;\n  }\n\n  /**\n   * Gets the recommended model configuration for a given tier\n   */\n  static getModelConfig(tier: AIModelTier): ModelConfig {\n    switch (tier) {\n      case AIModelTier.PREMIUM:\n        // Use Claude 3.5 Sonnet for premium (Smartest)\n        return { provider: 'anthropic', modelId: 'claude-3-5-sonnet-20241022' };\n      case AIModelTier.ECONOMY:\n        // Use Gemini 1.5 Flash for economy (Cheapest)\n        return { provider: 'gemini', modelId: 'gemini-1.5-flash-8b' };\n      case AIModelTier.STANDARD:\n      default:\n        // Use Gemini 3.0 Flash for standard (Fastest/Balanced)\n        return { provider: 'gemini', modelId: 'gemini-3.0-flash' };\n    }\n  }\n}\n"],"version":3}