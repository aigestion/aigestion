{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\controllers\\persona.controller.ts","mappings":";;;AACA,iEAAuD;AACvD,oCAAiC;AAGjC,+EAA+D;AAC/D,6BAAwB;AACxB,iEAA2D;AAE9C,QAAA,aAAa,GAAG;IAC3B,IAAA,gCAAQ,EAAC;QACP,IAAI,EAAE,OAAC,CAAC,MAAM,CAAC;YACb,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,kBAAkB,CAAC;YAC3C,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,yBAAyB,CAAC;YACzD,YAAY,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,2BAA2B,CAAC;YAC5D,aAAa,EAAE,OAAC,CAAC,MAAM,CAAC;gBACtB,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,4BAA4B,CAAC;gBACzD,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,sBAAsB,CAAC;gBAClD,QAAQ,EAAE,OAAC,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;aAC7B,CAAC;YACF,KAAK,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;YACnC,QAAQ,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;YAChC,IAAI,EAAE,OAAC,CAAC,KAAK,CAAC,OAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;SACrC,CAAC;KACH,CAAC;IACF,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;QACxD,IAAI,CAAC;YACH,MAAM,oBAAoB,GAAG,4BAAS,CAAC,GAAG,CAAuB,aAAK,CAAC,oBAAoB,CAAC,CAAC;YAC7F,MAAM,OAAO,GAAG,MAAM,oBAAoB,CAAC,OAAO,CAAC;gBACjD,GAAG,GAAG,CAAC,IAAI;gBACX,OAAO,EAAG,GAAW,CAAC,IAAI,CAAC,EAAE;aAC9B,CAAC,CAAC;YAEH,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAA,gCAAa,EAAC,EAAE,OAAO,EAAE,EAAE,GAAG,EAAG,GAAW,CAAC,SAAS,CAAC,CAAC,CAAC;QAChF,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,CAAC;QACd,CAAC;IACH,CAAC;CACF,CAAC;AAEK,MAAM,sBAAsB,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC9F,IAAI,CAAC;QACH,MAAM,6BAA6B,GAAG,4BAAS,CAAC,GAAG,CACjD,aAAK,CAAC,6BAA6B,CACpC,CAAC;QACF,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,KAAe,CAAC,IAAI,EAAE,CAAC;QACxD,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,MAAgB,CAAC,IAAI,CAAC,CAAC;QAEzD,MAAM,MAAM,GAAG,MAAM,6BAA6B,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAE1E,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAA,gCAAa,EAAC,MAAM,EAAE,GAAG,EAAG,GAAW,CAAC,SAAS,CAAC,CAAC,CAAC;IAC3E,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,IAAI,CAAC,KAAK,CAAC,CAAC;IACd,CAAC;AACH,CAAC,CAAC;AAdW,QAAA,sBAAsB,0BAcjC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\controllers\\persona.controller.ts"],"sourcesContent":["import type { NextFunction, Request, Response } from 'express'; // using express types directly often simpler, or express\nimport { container } from '../config/inversify.config';\nimport { TYPES } from '../types';\nimport type { CreatePersonaUseCase } from '../application/usecases/persona/CreatePersonaUseCase';\nimport type { GetMarketplacePersonasUseCase } from '../application/usecases/persona/GetMarketplacePersonasUseCase';\nimport { validate } from '../middleware/validation.middleware';\nimport { z } from 'zod';\nimport { buildResponse } from '../common/response-builder';\n\nexport const createPersona = [\n  validate({\n    body: z.object({\n      name: z.string().min(1, 'Name is required'),\n      description: z.string().min(1, 'Description is required'),\n      systemPrompt: z.string().min(1, 'System Prompt is required'),\n      voiceSettings: z.object({\n        provider: z.string().min(1, 'Voice provider is required'),\n        voiceId: z.string().min(1, 'Voice ID is required'),\n        settings: z.any().optional(),\n      }),\n      price: z.number().min(0).optional(),\n      isPublic: z.boolean().optional(),\n      tags: z.array(z.string()).optional(),\n    }),\n  }),\n  async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const createPersonaUseCase = container.get<CreatePersonaUseCase>(TYPES.CreatePersonaUseCase);\n      const persona = await createPersonaUseCase.execute({\n        ...req.body,\n        ownerId: (req as any).user.id,\n      });\n\n      res.status(201).json(buildResponse({ persona }, 201, (req as any).requestId));\n    } catch (error) {\n      next(error);\n    }\n  },\n];\n\nexport const getMarketplacePersonas = async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const getMarketplacePersonasUseCase = container.get<GetMarketplacePersonasUseCase>(\n      TYPES.GetMarketplacePersonasUseCase,\n    );\n    const limit = parseInt(req.query.limit as string) || 20;\n    const offset = parseInt(req.query.offset as string) || 0;\n\n    const result = await getMarketplacePersonasUseCase.execute(limit, offset);\n\n    res.status(200).json(buildResponse(result, 200, (req as any).requestId));\n  } catch (error) {\n    next(error);\n  }\n};\n"],"version":3}