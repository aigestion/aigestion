692cb94f822a4f1dd7c23940bacfead3
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.SentinelController = void 0;
const express_1 = require("express");
const inversify_express_utils_1 = require("inversify-express-utils");
const inversify_1 = require("inversify");
const types_1 = require("../types");
const SovereignSentinelService_1 = require("../services/SovereignSentinelService");
const logger_1 = require("../utils/logger");
let SentinelController = class SentinelController {
    sentinelService;
    constructor(sentinelService) {
        this.sentinelService = sentinelService;
    }
    async getForecast(res) {
        try {
            const forecasts = await this.sentinelService.getResourceForecasts();
            return res.json({
                success: true,
                timestamp: new Date(),
                forecasts
            });
        }
        catch (error) {
            logger_1.logger.error('[SentinelController] Forecast failed:', error);
            return res.status(500).json({ error: 'Failed to generate resource forecast' });
        }
    }
};
exports.SentinelController = SentinelController;
__decorate([
    (0, inversify_express_utils_1.httpGet)('/forecast'),
    __param(0, (0, inversify_express_utils_1.response)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof express_1.Response !== "undefined" && express_1.Response) === "function" ? _b : Object]),
    __metadata("design:returntype", Promise)
], SentinelController.prototype, "getForecast", null);
exports.SentinelController = SentinelController = __decorate([
    (0, inversify_express_utils_1.controller)('/sovereign/sentinel'),
    __param(0, (0, inversify_1.inject)(types_1.TYPES.SovereignSentinelService)),
    __metadata("design:paramtypes", [typeof (_a = typeof SovereignSentinelService_1.SovereignSentinelService !== "undefined" && SovereignSentinelService_1.SovereignSentinelService) === "function" ? _a : Object])
], SentinelController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxjb250cm9sbGVyc1xcU2VudGluZWxDb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBNEM7QUFDNUMscUVBQXdFO0FBQ3hFLHlDQUFtQztBQUNuQyxvQ0FBaUM7QUFDakMsbUZBQWdGO0FBQ2hGLDRDQUF5QztBQUdsQyxJQUFNLGtCQUFrQixHQUF4QixNQUFNLGtCQUFrQjtJQUVxQjtJQURsRCxZQUNrRCxlQUF5QztRQUF6QyxvQkFBZSxHQUFmLGVBQWUsQ0FBMEI7SUFDeEYsQ0FBQztJQUdTLEFBQU4sS0FBSyxDQUFDLFdBQVcsQ0FBYSxHQUFhO1FBQ2hELElBQUksQ0FBQztZQUNILE1BQU0sU0FBUyxHQUFHLE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBQ3BFLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQztnQkFDZCxPQUFPLEVBQUUsSUFBSTtnQkFDYixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7Z0JBQ3JCLFNBQVM7YUFDVixDQUFDLENBQUM7UUFDTCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLGVBQU0sQ0FBQyxLQUFLLENBQUMsdUNBQXVDLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDN0QsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxzQ0FBc0MsRUFBRSxDQUFDLENBQUM7UUFDakYsQ0FBQztJQUNILENBQUM7Q0FDRixDQUFBO0FBbkJZLGdEQUFrQjtBQU1oQjtJQURaLElBQUEsaUNBQU8sRUFBQyxXQUFXLENBQUM7SUFDSyxXQUFBLElBQUEsa0NBQVEsR0FBRSxDQUFBOzt5REFBTSxrQkFBUSxvQkFBUixrQkFBUTs7cURBWWpEOzZCQWxCVSxrQkFBa0I7SUFEOUIsSUFBQSxvQ0FBVSxFQUFDLHFCQUFxQixDQUFDO0lBRzdCLFdBQUEsSUFBQSxrQkFBTSxFQUFDLGFBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO3lEQUEwQixtREFBd0Isb0JBQXhCLG1EQUF3QjtHQUZoRixrQkFBa0IsQ0FtQjlCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQWxlamFuZHJvXFxBSUdlc3Rpb25cXGJhY2tlbmRcXHNyY1xcY29udHJvbGxlcnNcXFNlbnRpbmVsQ29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgeyBjb250cm9sbGVyLCBodHRwR2V0LCByZXNwb25zZSB9IGZyb20gJ2ludmVyc2lmeS1leHByZXNzLXV0aWxzJztcclxuaW1wb3J0IHsgaW5qZWN0IH0gZnJvbSAnaW52ZXJzaWZ5JztcclxuaW1wb3J0IHsgVFlQRVMgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFNvdmVyZWlnblNlbnRpbmVsU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1NvdmVyZWlnblNlbnRpbmVsU2VydmljZSc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XHJcblxyXG5AY29udHJvbGxlcignL3NvdmVyZWlnbi9zZW50aW5lbCcpXHJcbmV4cG9ydCBjbGFzcyBTZW50aW5lbENvbnRyb2xsZXIge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQGluamVjdChUWVBFUy5Tb3ZlcmVpZ25TZW50aW5lbFNlcnZpY2UpIHByaXZhdGUgc2VudGluZWxTZXJ2aWNlOiBTb3ZlcmVpZ25TZW50aW5lbFNlcnZpY2VcclxuICApIHt9XHJcblxyXG4gIEBodHRwR2V0KCcvZm9yZWNhc3QnKVxyXG4gIHB1YmxpYyBhc3luYyBnZXRGb3JlY2FzdChAcmVzcG9uc2UoKSByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBmb3JlY2FzdHMgPSBhd2FpdCB0aGlzLnNlbnRpbmVsU2VydmljZS5nZXRSZXNvdXJjZUZvcmVjYXN0cygpO1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGZvcmVjYXN0c1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignW1NlbnRpbmVsQ29udHJvbGxlcl0gRm9yZWNhc3QgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVzb3VyY2UgZm9yZWNhc3QnIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=