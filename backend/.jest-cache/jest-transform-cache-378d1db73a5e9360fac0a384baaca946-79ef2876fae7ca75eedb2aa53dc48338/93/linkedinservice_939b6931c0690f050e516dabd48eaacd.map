{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\linkedin.service.ts","mappings":";;;;;;;;;;;;AAAA,kDAA0B;AAC1B,mCAAiC;AAEjC,qDAA2C;AAC3C,4CAAyC;AAGlC,IAAM,eAAe,GAArB,MAAM,eAAe;IACT,OAAO,GAAG,6BAA6B,CAAC;IAEzD;;;;OAIG;IACH,KAAK,CAAC,SAAS,CAAC,IAAY,EAAE,aAAuC,QAAQ;QAC3E,IAAI,CAAC,gBAAG,CAAC,qBAAqB,IAAI,CAAC,gBAAG,CAAC,yBAAyB,EAAE,CAAC;YACjE,eAAM,CAAC,IAAI,CACT,iFAAiF,CAClF,CAAC;YACF,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,uBAAuB,EAAE,CAAC;QAC5D,CAAC;QAED,IAAI,CAAC;YACH,MAAM,QAAQ,GAAG,MAAM,eAAK,CAAC,IAAI,CAC/B,GAAG,IAAI,CAAC,OAAO,WAAW,EAC1B;gBACE,MAAM,EAAE,uBAAuB,gBAAG,CAAC,yBAAyB,EAAE;gBAC9D,cAAc,EAAE,WAAW;gBAC3B,eAAe,EAAE;oBACf,+BAA+B,EAAE;wBAC/B,eAAe,EAAE;4BACf,IAAI,EAAE,IAAI;yBACX;wBACD,kBAAkB,EAAE,MAAM;qBAC3B;iBACF;gBACD,UAAU,EAAE;oBACV,0CAA0C,EAAE,UAAU;iBACvD;aACF,EACD;gBACE,OAAO,EAAE;oBACP,aAAa,EAAE,UAAU,gBAAG,CAAC,qBAAqB,EAAE;oBACpD,2BAA2B,EAAE,OAAO;oBACpC,cAAc,EAAE,kBAAkB;iBACnC;aACF,CACF,CAAC;YAEF,eAAM,CAAC,IAAI,CAAC,yBAAyB,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;YACzD,OAAO,QAAQ,CAAC,IAAI,CAAC;QACvB,CAAC;QAAC,OAAO,KAAU,EAAE,CAAC;YACpB,eAAM,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,IAAI,KAAK,CAAC,OAAO,EAAE,EAAE,2BAA2B,CAAC,CAAC;YAC5F,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF,CAAA;AAlDY,0CAAe;0BAAf,eAAe;IAD3B,IAAA,gBAAO,GAAE;GACG,eAAe,CAkD3B","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\linkedin.service.ts"],"sourcesContent":["import axios from 'axios';\nimport { Service } from 'typedi';\n\nimport { env } from '../config/env.schema';\nimport { logger } from '../utils/logger';\n\n@Service()\nexport class LinkedInService {\n  private readonly baseUrl = 'https://api.linkedin.com/v2';\n\n  /**\n   * Share a text post to LinkedIn Organization or Personal Profile\n   * @param text Content of the post\n   * @param visibility 'PUBLIC' or 'CONNECTIONS'\n   */\n  async sharePost(text: string, visibility: 'PUBLIC' | 'CONNECTIONS' = 'PUBLIC'): Promise<any> {\n    if (!env.LINKEDIN_ACCESS_TOKEN || !env.LINKEDIN_ORGANIZATION_URN) {\n      logger.warn(\n        'LinkedIn credentials missing (LINKEDIN_ACCESS_TOKEN, LINKEDIN_ORGANIZATION_URN)',\n      );\n      return { success: false, error: 'Configuration missing' };\n    }\n\n    try {\n      const response = await axios.post(\n        `${this.baseUrl}/ugcPosts`,\n        {\n          author: `urn:li:organization:${env.LINKEDIN_ORGANIZATION_URN}`,\n          lifecycleState: 'PUBLISHED',\n          specificContent: {\n            'com.linkedin.ugc.ShareContent': {\n              shareCommentary: {\n                text: text,\n              },\n              shareMediaCategory: 'NONE',\n            },\n          },\n          visibility: {\n            'com.linkedin.ugc.MemberNetworkVisibility': visibility,\n          },\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${env.LINKEDIN_ACCESS_TOKEN}`,\n            'X-Restli-Protocol-Version': '2.0.0',\n            'Content-Type': 'application/json',\n          },\n        },\n      );\n\n      logger.info(`LinkedIn post shared: ${response.data.id}`);\n      return response.data;\n    } catch (error: any) {\n      logger.error({ error: error.response?.data || error.message }, 'Error sharing to LinkedIn');\n      throw error;\n    }\n  }\n}\n"],"version":3}