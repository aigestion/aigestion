{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\application\\usecases\\UpdateSubscriptionUseCase.ts","mappings":";;;;;;;;;;;;;;;AAAA,yCAA+C;AAE/C,uCAAoC;AACpC,+CAA8C;AAGvC,IAAM,yBAAyB,GAA/B,MAAM,yBAAyB;IACc;IAAlD,YAAkD,cAA+B;QAA/B,mBAAc,GAAd,cAAc,CAAiB;IAAG,CAAC;IAErF,KAAK,CAAC,OAAO,CAAC,MAAc,EAAE,IAAY;QACxC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAExD,IAAI,CAAC,IAAI,EAAE,CAAC;YACV,MAAM,IAAI,iBAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE,WAAW,CAAC,CAAC;QAChE,CAAC;QAED,2BAA2B;QAC3B,uDAAuD;QACvD,mCAAmC;QACnC,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC;QAErE,sBAAsB;QACtB,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAC/D,OAAO,WAAW,CAAC;IACrB,CAAC;CACF,CAAA;AAnBY,8DAAyB;oCAAzB,yBAAyB;IADrC,IAAA,sBAAU,GAAE;IAEE,WAAA,IAAA,kBAAM,EAAC,aAAK,CAAC,cAAc,CAAC,CAAA;;GAD9B,yBAAyB,CAmBrC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\application\\usecases\\UpdateSubscriptionUseCase.ts"],"sourcesContent":["import { injectable, inject } from 'inversify';\nimport type { IUserRepository } from '../../infrastructure/repository/UserRepository';\nimport { TYPES } from '../../types';\nimport { AppError } from '../../utils/errors';\n\n@injectable()\nexport class UpdateSubscriptionUseCase {\n  constructor(@inject(TYPES.UserRepository) private userRepository: IUserRepository) {}\n\n  async execute(userId: string, plan: string): Promise<any> {\n    const user = await this.userRepository.findById(userId);\n\n    if (!user) {\n      throw new AppError('Usuario no encontrado', 404, 'NOT_FOUND');\n    }\n\n    // Update subscription plan\n    // In a real scenario, this might trigger Stripe logic.\n    // For now, we update the DB field.\n    await this.userRepository.update(userId, { subscriptionPlan: plan });\n\n    // Return updated user\n    const updatedUser = await this.userRepository.findById(userId);\n    return updatedUser;\n  }\n}\n"],"version":3}