{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\application\\usecases\\persona\\CreatePersonaUseCase.ts","mappings":";;;;;;;;;;;;;;;;AAAA,yCAA+C;AAC/C,0CAAuC;AACvC,4FAA0F;AAE1F,kDAAiD;AAkB1C,IAAM,oBAAoB,GAA1B,MAAM,oBAAoB;IACsB;IAArD,YAAqD,iBAAqC;QAArC,sBAAiB,GAAjB,iBAAiB,CAAoB;IAAG,CAAC;IAE9F,KAAK,CAAC,OAAO,CAAC,IAAsB;QAClC,mBAAmB;QACnB,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;YAC5D,MAAM,IAAI,iBAAQ,CAAC,yBAAyB,EAAE,GAAG,EAAE,kBAAkB,CAAC,CAAC;QACzE,CAAC;QAED,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,KAAK,YAAY,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,KAAK,QAAQ,EAAE,CAAC;YAC7F,0DAA0D;YAC1D,qFAAqF;YACrF,qDAAqD;QACvD,CAAC;QAED,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YAClD,GAAG,IAAI;YACP,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC;YACtB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,KAAK;YAChC,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE;SACf,CAAC,CAAC,CAAC,uEAAuE;QAElF,OAAO,OAAO,CAAC;IACjB,CAAC;CACF,CAAA;AAxBY,oDAAoB;+BAApB,oBAAoB;IADhC,IAAA,sBAAU,GAAE;IAEE,WAAA,IAAA,kBAAM,EAAC,aAAK,CAAC,iBAAiB,CAAC,CAAA;yDAA4B,sCAAkB,oBAAlB,sCAAkB;GAD/E,oBAAoB,CAwBhC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\application\\usecases\\persona\\CreatePersonaUseCase.ts"],"sourcesContent":["import { injectable, inject } from 'inversify';\nimport { TYPES } from '../../../types';\nimport { IPersonaRepository } from '../../../infrastructure/repository/PersonaRepository';\nimport { IPersona } from '../../../models/Persona';\nimport { AppError } from '../../../utils/errors';\n\nexport interface CreatePersonaDto {\n  name: string;\n  description: string;\n  systemPrompt: string;\n  voiceSettings: {\n    provider: string;\n    voiceId: string;\n    settings?: any;\n  };\n  price?: number;\n  isPublic?: boolean;\n  tags?: string[];\n  ownerId: string;\n}\n\n@injectable()\nexport class CreatePersonaUseCase {\n  constructor(@inject(TYPES.PersonaRepository) private personaRepository: IPersonaRepository) {}\n\n  async execute(data: CreatePersonaDto): Promise<IPersona> {\n    // Basic validation\n    if (!data.name || !data.systemPrompt || !data.voiceSettings) {\n      throw new AppError('Missing required fields', 400, 'VALIDATION_ERROR');\n    }\n\n    if (data.voiceSettings.provider !== 'elevenlabs' && data.voiceSettings.provider !== 'openai') {\n      // Allow other providers but maybe warn or validate later?\n      // For now, strict check to specific supported providers could be good, or just open.\n      // Let's keep it open but ensure provider is defined.\n    }\n\n    const persona = await this.personaRepository.create({\n      ...data,\n      price: data.price ?? 0,\n      isPublic: data.isPublic ?? false,\n      tags: data.tags ?? [],\n    } as any); // Type assertion needed due to Partial<IPersona> vs explicit DTO match\n\n    return persona;\n  }\n}\n"],"version":3}