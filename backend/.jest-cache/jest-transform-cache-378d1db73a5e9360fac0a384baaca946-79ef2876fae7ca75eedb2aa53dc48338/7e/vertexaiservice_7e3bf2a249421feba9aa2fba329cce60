2217043cca81bb54b5f4724e40267d2e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.vertexAIService = exports.VertexAIService = void 0;
// Importing as any to avoid TS2709 errors
const vertexai_1 = require("@google-cloud/vertexai");
const logger_1 = require("../../utils/logger");
class VertexAIService {
    vertexAI = null;
    model = null;
    isInitialized = false;
    constructor() {
        this.initialize();
    }
    initialize() {
        try {
            const projectId = process.env.GOOGLE_CLOUD_PROJECT_ID;
            const location = process.env.GOOGLE_CLOUD_LOCATION || 'us-central1';
            if (!projectId) {
                logger_1.logger.warn('GOOGLE_CLOUD_PROJECT_ID not set. Vertex AI service will be disabled.');
                return;
            }
            this.vertexAI = new vertexai_1.VertexAI({ project: projectId, location });
            this.model = this.vertexAI.getGenerativeModel({ model: 'gemini-1.5-pro' }); // Or configurable model
            this.isInitialized = true;
            logger_1.logger.info('Vertex AI service initialized successfully');
        }
        catch (error) {
            logger_1.logger.error('Failed to initialize Vertex AI service', error);
        }
    }
    async generateText(prompt) {
        if (!this.isInitialized || !this.model) {
            logger_1.logger.warn('Vertex AI not initialized, returning mock response');
            return 'Vertex AI not configurated. Mock response.';
        }
        try {
            const result = await this.model.generateContent(prompt);
            const response = result.response;
            const text = response.candidates?.[0]?.content?.parts?.[0]?.text;
            return text || '';
        }
        catch (error) {
            logger_1.logger.error('Error generating text with Vertex AI', error);
            throw error;
        }
    }
    async chat(history, message) {
        if (!this.isInitialized || !this.model) {
            logger_1.logger.warn('Vertex AI not initialized, returning mock response');
            return 'Vertex AI not configurated. Mock response.';
        }
        try {
            // Map simple history format to Vertex AI Content format if needed
            // This implementation assumes 'history' is already compatible or simple enough
            // real implementation might need mapping. For now, starting a fresh chat for simplicity of this task
            // or implementing a basic chat session.
            const chat = this.model.startChat({
                history: history, // Expecting correct format or empty
            });
            const result = await chat.sendMessage(message);
            const response = result.response;
            const text = response.candidates?.[0]?.content?.parts?.[0]?.text;
            return text || '';
        }
        catch (error) {
            logger_1.logger.error('Error comparing chat with Vertex AI', error);
            throw error;
        }
    }
    /**
     * Generates embeddings for a given text using Vertex AI
     */
    async generateEmbeddings(text) {
        if (!this.isInitialized || !this.vertexAI) {
            logger_1.logger.warn('Vertex AI not initialized, returning mock embedding');
            return new Array(768).fill(0);
        }
        try {
            const location = process.env.GOOGLE_CLOUD_LOCATION || 'europe-west1';
            const projectId = process.env.GOOGLE_CLOUD_PROJECT_ID;
            // Using vertexAI instance to get the embedding model
            const model = 'text-embedding-004';
            const result = await this.vertexAI.getGenerativeModel({ model }).embedContent({
                content: { role: 'user', parts: [{ text }] },
            });
            const embedding = result.embedding;
            return embedding.values || [];
        }
        catch (error) {
            logger_1.logger.error('Error generating embeddings with Vertex AI', error);
            return [];
        }
    }
}
exports.VertexAIService = VertexAIService;
exports.vertexAIService = new VertexAIService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcZ29vZ2xlXFx2ZXJ0ZXgtYWkuc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSwwQ0FBMEM7QUFDMUMscURBQWtEO0FBRWxELCtDQUE0QztBQUs1QyxNQUFhLGVBQWU7SUFDbEIsUUFBUSxHQUF3QixJQUFJLENBQUM7SUFDckMsS0FBSyxHQUErQixJQUFJLENBQUM7SUFDekMsYUFBYSxHQUFHLEtBQUssQ0FBQztJQUU5QjtRQUNFLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRU8sVUFBVTtRQUNoQixJQUFJLENBQUM7WUFDSCxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDO1lBQ3RELE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLElBQUksYUFBYSxDQUFDO1lBRXBFLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFDZixlQUFNLENBQUMsSUFBSSxDQUFDLHNFQUFzRSxDQUFDLENBQUM7Z0JBQ3BGLE9BQU87WUFDVCxDQUFDO1lBRUQsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7WUFDL0QsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLHdCQUF3QjtZQUNwRyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztZQUMxQixlQUFNLENBQUMsSUFBSSxDQUFDLDRDQUE0QyxDQUFDLENBQUM7UUFDNUQsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixlQUFNLENBQUMsS0FBSyxDQUFDLHdDQUF3QyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hFLENBQUM7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Z0JBQzVFLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO2FBQzdDLENBQUMsQ0FBQztZQUVILE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7WUFDbkMsT0FBTyxTQUFTLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztRQUNoQyxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLGVBQU0sQ0FBQyxLQUFLLENBQUMsNENBQTRDLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbEUsT0FBTyxFQUFFLENBQUM7UUFDWixDQUFDO0lBQ0gsQ0FBQztDQUNGO0FBakdELDBDQWlHQztBQUVZLFFBQUEsZUFBZSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcZ29vZ2xlXFx2ZXJ0ZXgtYWkuc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRpbmcgYXMgYW55IHRvIGF2b2lkIFRTMjcwOSBlcnJvcnNcbmltcG9ydCB7IFZlcnRleEFJIH0gZnJvbSAnQGdvb2dsZS1jbG91ZC92ZXJ0ZXhhaSc7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlcic7XG5cbnR5cGUgVmVydGV4QUlUeXBlID0gYW55O1xudHlwZSBHZW5lcmF0aXZlTW9kZWxUeXBlID0gYW55O1xuXG5leHBvcnQgY2xhc3MgVmVydGV4QUlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSB2ZXJ0ZXhBSTogVmVydGV4QUlUeXBlIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbW9kZWw6IEdlbmVyYXRpdmVNb2RlbFR5cGUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2plY3RJZCA9IHByb2Nlc3MuZW52LkdPT0dMRV9DTE9VRF9QUk9KRUNUX0lEO1xuICAgICAgY29uc3QgbG9jYXRpb24gPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xPVURfTE9DQVRJT04gfHwgJ3VzLWNlbnRyYWwxJztcblxuICAgICAgaWYgKCFwcm9qZWN0SWQpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0dPT0dMRV9DTE9VRF9QUk9KRUNUX0lEIG5vdCBzZXQuIFZlcnRleCBBSSBzZXJ2aWNlIHdpbGwgYmUgZGlzYWJsZWQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy52ZXJ0ZXhBSSA9IG5ldyBWZXJ0ZXhBSSh7IHByb2plY3Q6IHByb2plY3RJZCwgbG9jYXRpb24gfSk7XG4gICAgICB0aGlzLm1vZGVsID0gdGhpcy52ZXJ0ZXhBSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ2dlbWluaS0xLjUtcHJvJyB9KTsgLy8gT3IgY29uZmlndXJhYmxlIG1vZGVsXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgbG9nZ2VyLmluZm8oJ1ZlcnRleCBBSSBzZXJ2aWNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIFZlcnRleCBBSSBzZXJ2aWNlJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlVGV4dChwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQgfHwgIXRoaXMubW9kZWwpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdWZXJ0ZXggQUkgbm90IGluaXRpYWxpemVkLCByZXR1cm5pbmcgbW9jayByZXNwb25zZScpO1xuICAgICAgcmV0dXJuICdWZXJ0ZXggQUkgbm90IGNvbmZpZ3VyYXRlZC4gTW9jayByZXNwb25zZS4nO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXN1bHQucmVzcG9uc2U7XG4gICAgICBjb25zdCB0ZXh0ID0gcmVzcG9uc2UuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0O1xuICAgICAgcmV0dXJuIHRleHQgfHwgJyc7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyB0ZXh0IHdpdGggVmVydGV4IEFJJywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hhdChoaXN0b3J5OiBhbnlbXSwgbWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCB8fCAhdGhpcy5tb2RlbCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ1ZlcnRleCBBSSBub3QgaW5pdGlhbGl6ZWQsIHJldHVybmluZyBtb2NrIHJlc3BvbnNlJyk7XG4gICAgICByZXR1cm4gJ1ZlcnRleCBBSSBub3QgY29uZmlndXJhdGVkLiBNb2NrIHJlc3BvbnNlLic7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIE1hcCBzaW1wbGUgaGlzdG9yeSBmb3JtYXQgdG8gVmVydGV4IEFJIENvbnRlbnQgZm9ybWF0IGlmIG5lZWRlZFxuICAgICAgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBhc3N1bWVzICdoaXN0b3J5JyBpcyBhbHJlYWR5IGNvbXBhdGlibGUgb3Igc2ltcGxlIGVub3VnaFxuICAgICAgLy8gcmVhbCBpbXBsZW1lbnRhdGlvbiBtaWdodCBuZWVkIG1hcHBpbmcuIEZvciBub3csIHN0YXJ0aW5nIGEgZnJlc2ggY2hhdCBmb3Igc2ltcGxpY2l0eSBvZiB0aGlzIHRhc2tcbiAgICAgIC8vIG9yIGltcGxlbWVudGluZyBhIGJhc2ljIGNoYXQgc2Vzc2lvbi5cblxuICAgICAgY29uc3QgY2hhdCA9IHRoaXMubW9kZWwuc3RhcnRDaGF0KHtcbiAgICAgICAgaGlzdG9yeTogaGlzdG9yeSBhcyBhbnksIC8vIEV4cGVjdGluZyBjb3JyZWN0IGZvcm1hdCBvciBlbXB0eVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYXQuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQ/LnBhcnRzPy5bMF0/LnRleHQ7XG4gICAgICByZXR1cm4gdGV4dCB8fCAnJztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjb21wYXJpbmcgY2hhdCB3aXRoIFZlcnRleCBBSScsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgZW1iZWRkaW5ncyBmb3IgYSBnaXZlbiB0ZXh0IHVzaW5nIFZlcnRleCBBSVxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVFbWJlZGRpbmdzKHRleHQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCB8fCAhdGhpcy52ZXJ0ZXhBSSkge1xuICAgICAgbG9nZ2VyLndhcm4oJ1ZlcnRleCBBSSBub3QgaW5pdGlhbGl6ZWQsIHJldHVybmluZyBtb2NrIGVtYmVkZGluZycpO1xuICAgICAgcmV0dXJuIG5ldyBBcnJheSg3NjgpLmZpbGwoMCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gcHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX0xPQ0FUSU9OIHx8ICdldXJvcGUtd2VzdDEnO1xuICAgICAgY29uc3QgcHJvamVjdElkID0gcHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX1BST0pFQ1RfSUQ7XG5cbiAgICAgIC8vIFVzaW5nIHZlcnRleEFJIGluc3RhbmNlIHRvIGdldCB0aGUgZW1iZWRkaW5nIG1vZGVsXG4gICAgICBjb25zdCBtb2RlbCA9ICd0ZXh0LWVtYmVkZGluZy0wMDQnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy52ZXJ0ZXhBSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbCB9KS5lbWJlZENvbnRlbnQoe1xuICAgICAgICBjb250ZW50OiB7IHJvbGU6ICd1c2VyJywgcGFydHM6IFt7IHRleHQgfV0gfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlbWJlZGRpbmcgPSByZXN1bHQuZW1iZWRkaW5nO1xuICAgICAgcmV0dXJuIGVtYmVkZGluZy52YWx1ZXMgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBlbWJlZGRpbmdzIHdpdGggVmVydGV4IEFJJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdmVydGV4QUlTZXJ2aWNlID0gbmV3IFZlcnRleEFJU2VydmljZSgpO1xuIl0sInZlcnNpb24iOjN9