4a52353cf8e32fc214a084b2b894a215
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// src/routes/users.routes.ts
const express_1 = require("express");
const validation_middleware_1 = require("../middleware/validation.middleware");
const user_controller_1 = require("../controllers/user.controller");
const router = (0, express_1.Router)();
console.log('[DEBUG] users.routes.ts: Router created');
/**
 * @openapi
 * /api/v1/users:
 *   post:
 *     summary: Create a new user
 *     tags: [Users]
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *     responses:
 *       201:
 *         description: User created
 */
router.post('/', (0, validation_middleware_1.validate)({ body: validation_middleware_1.schemas.user.create }), user_controller_1.createUser);
// router.post('/', createUser);
/**
 * @openapi
 * /api/v1/users:
 *   get:
 *     summary: Retrieve all users
 *     tags: [Users]
 *     responses:
 *       200:
 *         description: List of users
 */
const pagination_middleware_1 = require("../middleware/pagination.middleware");
router.get('/', pagination_middleware_1.validatePagination, user_controller_1.getAllUsers);
/**
 * @openapi
 * /api/v1/users/{id}:
 *   get:
 *     summary: Get user by ID
 *     tags: [Users]
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     responses:
 *       200:
 *         description: User data
 *       404:
 *         description: User not found
 */
router.get('/:id', (0, validation_middleware_1.validateParams)(validation_middleware_1.schemas.common.id), user_controller_1.getUserById);
/**
 * @openapi
 * /api/v1/users/{id}:
 *   put:
 *     summary: Update user by ID
 *     tags: [Users]
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/UserUpdate'
 *     responses:
 *       200:
 *         description: User updated
 *       404:
 *         description: User not found
 */
router.put('/:id', (0, validation_middleware_1.validateParams)(validation_middleware_1.schemas.common.id), (0, validation_middleware_1.validateBody)(validation_middleware_1.schemas.user.update), user_controller_1.updateUser);
router.delete('/:id', (0, validation_middleware_1.validateParams)(validation_middleware_1.schemas.common.id), user_controller_1.deleteUser);
// Explicitly handle errors within this router to prevent 404 fall-through
// router.use(errorHandler);
exports.default = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxyb3V0ZXNcXHVzZXJzLnJvdXRlcy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZCQUE2QjtBQUM3QixxQ0FBaUM7QUFFakMsK0VBSzZDO0FBQzdDLG9FQU13QztBQUV4QyxNQUFNLE1BQU0sR0FBRyxJQUFBLGdCQUFNLEdBQUUsQ0FBQztBQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFFdkQ7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBQ0gsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBQSxnQ0FBUSxFQUFDLEVBQUUsSUFBSSxFQUFFLCtCQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsNEJBQVUsQ0FBQyxDQUFDO0FBQ3RFLGdDQUFnQztBQUNoQzs7Ozs7Ozs7O0dBU0c7QUFDSCwrRUFBeUU7QUFDekUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsMENBQWtCLEVBQUUsNkJBQVcsQ0FBQyxDQUFDO0FBQ2pEOzs7Ozs7Ozs7Ozs7Ozs7OztHQWlCRztBQUNILE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUEsc0NBQWMsRUFBQywrQkFBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSw2QkFBVyxDQUFDLENBQUM7QUFDbkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUJHO0FBQ0gsTUFBTSxDQUFDLEdBQUcsQ0FDUixNQUFNLEVBQ04sSUFBQSxzQ0FBYyxFQUFDLCtCQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUNqQyxJQUFBLG9DQUFZLEVBQUMsK0JBQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQ2pDLDRCQUFVLENBQ1gsQ0FBQztBQXFCRixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFBLHNDQUFjLEVBQUMsK0JBQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsNEJBQVUsQ0FBQyxDQUFDO0FBRXJFLDBFQUEwRTtBQUMxRSw0QkFBNEI7QUFFNUIsa0JBQWUsTUFBTSxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQWxlamFuZHJvXFxBSUdlc3Rpb25cXGJhY2tlbmRcXHNyY1xccm91dGVzXFx1c2Vycy5yb3V0ZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3JvdXRlcy91c2Vycy5yb3V0ZXMudHNcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuXG5pbXBvcnQge1xuICB2YWxpZGF0ZSxcbiAgdmFsaWRhdGVQYXJhbXMsXG4gIHZhbGlkYXRlQm9keSxcbiAgc2NoZW1hcyxcbn0gZnJvbSAnLi4vbWlkZGxld2FyZS92YWxpZGF0aW9uLm1pZGRsZXdhcmUnO1xuaW1wb3J0IHtcbiAgY3JlYXRlVXNlcixcbiAgZGVsZXRlVXNlcixcbiAgZ2V0QWxsVXNlcnMsXG4gIGdldFVzZXJCeUlkLFxuICB1cGRhdGVVc2VyLFxufSBmcm9tICcuLi9jb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXInO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcbmNvbnNvbGUubG9nKCdbREVCVUddIHVzZXJzLnJvdXRlcy50czogUm91dGVyIGNyZWF0ZWQnKTtcblxuLyoqXG4gKiBAb3BlbmFwaVxuICogL2FwaS92MS91c2VyczpcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBDcmVhdGUgYSBuZXcgdXNlclxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgY3JlYXRlZFxuICovXG5yb3V0ZXIucG9zdCgnLycsIHZhbGlkYXRlKHsgYm9keTogc2NoZW1hcy51c2VyLmNyZWF0ZSB9KSwgY3JlYXRlVXNlcik7XG4vLyByb3V0ZXIucG9zdCgnLycsIGNyZWF0ZVVzZXIpO1xuLyoqXG4gKiBAb3BlbmFwaVxuICogL2FwaS92MS91c2VyczpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IFJldHJpZXZlIGFsbCB1c2Vyc1xuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMaXN0IG9mIHVzZXJzXG4gKi9cbmltcG9ydCB7IHZhbGlkYXRlUGFnaW5hdGlvbiB9IGZyb20gJy4uL21pZGRsZXdhcmUvcGFnaW5hdGlvbi5taWRkbGV3YXJlJztcbnJvdXRlci5nZXQoJy8nLCB2YWxpZGF0ZVBhZ2luYXRpb24sIGdldEFsbFVzZXJzKTtcbi8qKlxuICogQG9wZW5hcGlcbiAqIC9hcGkvdjEvdXNlcnMve2lkfTpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCB1c2VyIGJ5IElEXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGRhdGFcbiAqICAgICAgIDQwNDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgbm90IGZvdW5kXG4gKi9cbnJvdXRlci5nZXQoJy86aWQnLCB2YWxpZGF0ZVBhcmFtcyhzY2hlbWFzLmNvbW1vbi5pZCksIGdldFVzZXJCeUlkKTtcbi8qKlxuICogQG9wZW5hcGlcbiAqIC9hcGkvdjEvdXNlcnMve2lkfTpcbiAqICAgcHV0OlxuICogICAgIHN1bW1hcnk6IFVwZGF0ZSB1c2VyIGJ5IElEXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyVXBkYXRlJ1xuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgdXBkYXRlZFxuICogICAgICAgNDA0OlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBub3QgZm91bmRcbiAqL1xucm91dGVyLnB1dChcbiAgJy86aWQnLFxuICB2YWxpZGF0ZVBhcmFtcyhzY2hlbWFzLmNvbW1vbi5pZCksXG4gIHZhbGlkYXRlQm9keShzY2hlbWFzLnVzZXIudXBkYXRlKSxcbiAgdXBkYXRlVXNlcixcbik7XG4vKipcbiAqIEBvcGVuYXBpXG4gKiAvYXBpL3YxL3VzZXJzL3tpZH06XG4gKiAgIGRlbGV0ZTpcbiAqICAgICBzdW1tYXJ5OiBEZWxldGUgdXNlciBieSBJRFxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcGF0aFxuICogICAgICAgICBuYW1lOiBpZFxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjA0OlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBkZWxldGVkXG4gKiAgICAgICA0MDQ6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIG5vdCBmb3VuZFxuICovXG5pbXBvcnQgeyBlcnJvckhhbmRsZXIgfSBmcm9tICcuLi9taWRkbGV3YXJlL2Vycm9yLm1pZGRsZXdhcmUnO1xuXG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgdmFsaWRhdGVQYXJhbXMoc2NoZW1hcy5jb21tb24uaWQpLCBkZWxldGVVc2VyKTtcblxuLy8gRXhwbGljaXRseSBoYW5kbGUgZXJyb3JzIHdpdGhpbiB0aGlzIHJvdXRlciB0byBwcmV2ZW50IDQwNCBmYWxsLXRocm91Z2hcbi8vIHJvdXRlci51c2UoZXJyb3JIYW5kbGVyKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sInZlcnNpb24iOjN9