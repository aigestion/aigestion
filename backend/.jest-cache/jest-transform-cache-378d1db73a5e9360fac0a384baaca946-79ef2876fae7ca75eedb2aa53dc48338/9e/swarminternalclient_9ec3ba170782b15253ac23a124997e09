8f75adee2d37044bd2bbde44e0377c61
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.swarmInternalClient = exports.SwarmInternalClient = void 0;
const axios_1 = __importDefault(require("axios"));
const env_schema_1 = require("../config/env.schema");
const logger_1 = require("../utils/logger");
/**
 * [GOD MODE] Swarm Internal Client
 * Handles authenticated communication with the Python Swarm IA Engine.
 */
class SwarmInternalClient {
    client;
    constructor() {
        this.client = axios_1.default.create({
            baseURL: env_schema_1.env.IA_ENGINE_URL || 'http://localhost:8000',
            headers: {
                'Content-Type': 'application/json',
                'X-API-Key': env_schema_1.env.IA_ENGINE_API_KEY,
            },
            timeout: 30000, // Autonomous agents might take time
        });
        // Logging interceptor
        this.client.interceptors.request.use(config => {
            logger_1.logger.debug(`[SwarmInternalClient] Request to ${config.baseURL}${config.url}`);
            return config;
        });
        this.client.interceptors.response.use(response => response, error => {
            logger_1.logger.error(`[SwarmInternalClient] Error: ${error.message}`, {
                url: error.config?.url,
                status: error.response?.status,
            });
            return Promise.reject(error);
        });
    }
    /**
     * Status check
     */
    async getStatus() {
        const response = await this.client.get('/health');
        return response.data;
    }
    /**
     * Calling Daniela's specialized routes
     */
    async getDanielaStatus() {
        const response = await this.client.get('/daniela/status');
        return response.data;
    }
    /**
     * Generic Post
     */
    async post(path, data) {
        const response = await this.client.post(path, data);
        return response.data;
    }
}
exports.SwarmInternalClient = SwarmInternalClient;
exports.swarmInternalClient = new SwarmInternalClient();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcc3dhcm0taW50ZXJuYWwuY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGtEQUE2QztBQUM3QyxxREFBMkM7QUFDM0MsNENBQXlDO0FBRXpDOzs7R0FHRztBQUNILE1BQWEsbUJBQW1CO0lBQ3RCLE1BQU0sQ0FBZ0I7SUFFOUI7UUFDRSxJQUFJLENBQUMsTUFBTSxHQUFHLGVBQUssQ0FBQyxNQUFNLENBQUM7WUFDekIsT0FBTyxFQUFFLGdCQUFHLENBQUMsYUFBYSxJQUFJLHVCQUF1QjtZQUNyRCxPQUFPLEVBQUU7Z0JBQ1AsY0FBYyxFQUFFLGtCQUFrQjtnQkFDbEMsV0FBVyxFQUFFLGdCQUFHLENBQUMsaUJBQWlCO2FBQ25DO1lBQ0QsT0FBTyxFQUFFLEtBQUssRUFBRSxvQ0FBb0M7U0FDckQsQ0FBQyxDQUFDO1FBRUgsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDNUMsZUFBTSxDQUFDLEtBQUssQ0FBQyxvQ0FBb0MsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNoRixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQ25DLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUNwQixLQUFLLENBQUMsRUFBRTtZQUNOLGVBQU0sQ0FBQyxLQUFLLENBQUMsZ0NBQWdDLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRTtnQkFDNUQsR0FBRyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsR0FBRztnQkFDdEIsTUFBTSxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsTUFBTTthQUMvQixDQUFDLENBQUM7WUFDSCxPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUNGLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsU0FBUztRQUNiLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDbEQsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ3ZCLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyxnQkFBZ0I7UUFDcEIsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzFELE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztJQUN2QixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsSUFBSSxDQUFDLElBQVksRUFBRSxJQUFTO1FBQ2hDLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BELE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztJQUN2QixDQUFDO0NBQ0Y7QUF0REQsa0RBc0RDO0FBRVksUUFBQSxtQkFBbUIsR0FBRyxJQUFJLG1CQUFtQixFQUFFLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbGVqYW5kcm9cXEFJR2VzdGlvblxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcc3dhcm0taW50ZXJuYWwuY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcywgeyBBeGlvc0luc3RhbmNlIH0gZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuLi9jb25maWcvZW52LnNjaGVtYSc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XHJcblxyXG4vKipcclxuICogW0dPRCBNT0RFXSBTd2FybSBJbnRlcm5hbCBDbGllbnRcclxuICogSGFuZGxlcyBhdXRoZW50aWNhdGVkIGNvbW11bmljYXRpb24gd2l0aCB0aGUgUHl0aG9uIFN3YXJtIElBIEVuZ2luZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTd2FybUludGVybmFsQ2xpZW50IHtcclxuICBwcml2YXRlIGNsaWVudDogQXhpb3NJbnN0YW5jZTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNsaWVudCA9IGF4aW9zLmNyZWF0ZSh7XHJcbiAgICAgIGJhc2VVUkw6IGVudi5JQV9FTkdJTkVfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAnWC1BUEktS2V5JzogZW52LklBX0VOR0lORV9BUElfS0VZLFxyXG4gICAgICB9LFxyXG4gICAgICB0aW1lb3V0OiAzMDAwMCwgLy8gQXV0b25vbW91cyBhZ2VudHMgbWlnaHQgdGFrZSB0aW1lXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMb2dnaW5nIGludGVyY2VwdG9yXHJcbiAgICB0aGlzLmNsaWVudC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoY29uZmlnID0+IHtcclxuICAgICAgbG9nZ2VyLmRlYnVnKGBbU3dhcm1JbnRlcm5hbENsaWVudF0gUmVxdWVzdCB0byAke2NvbmZpZy5iYXNlVVJMfSR7Y29uZmlnLnVybH1gKTtcclxuICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoXHJcbiAgICAgIHJlc3BvbnNlID0+IHJlc3BvbnNlLFxyXG4gICAgICBlcnJvciA9PiB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGBbU3dhcm1JbnRlcm5hbENsaWVudF0gRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLCB7XHJcbiAgICAgICAgICB1cmw6IGVycm9yLmNvbmZpZz8udXJsLFxyXG4gICAgICAgICAgc3RhdHVzOiBlcnJvci5yZXNwb25zZT8uc3RhdHVzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGF0dXMgY2hlY2tcclxuICAgKi9cclxuICBhc3luYyBnZXRTdGF0dXMoKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KCcvaGVhbHRoJyk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxpbmcgRGFuaWVsYSdzIHNwZWNpYWxpemVkIHJvdXRlc1xyXG4gICAqL1xyXG4gIGFzeW5jIGdldERhbmllbGFTdGF0dXMoKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KCcvZGFuaWVsYS9zdGF0dXMnKTtcclxuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJpYyBQb3N0XHJcbiAgICovXHJcbiAgYXN5bmMgcG9zdChwYXRoOiBzdHJpbmcsIGRhdGE6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnBvc3QocGF0aCwgZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzd2FybUludGVybmFsQ2xpZW50ID0gbmV3IFN3YXJtSW50ZXJuYWxDbGllbnQoKTtcclxuIl0sInZlcnNpb24iOjN9