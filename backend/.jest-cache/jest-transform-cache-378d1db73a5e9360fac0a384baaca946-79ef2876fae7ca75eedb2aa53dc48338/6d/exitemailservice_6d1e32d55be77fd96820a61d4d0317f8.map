{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\exit-email.service.ts","mappings":";;;;;AAUA,oCAcC;AAMD,wCAYC;AA1CD,4CAAoB;AACpB,gDAAwB;AAExB,4EAA4E;AAC5E,MAAM,YAAY,GAAG,cAAI,CAAC,OAAO,CAAC,SAAS,EAAE,6BAA6B,CAAC,CAAC;AAE5E;;;GAGG;AACH,SAAgB,YAAY;IAC1B,MAAM,MAAM,GAA2B,EAAE,CAAC;IAC1C,IAAI,CAAC,YAAE,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC;QACjC,OAAO,MAAM,CAAC;IAChB,CAAC;IACD,MAAM,KAAK,GAAG,YAAE,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;IAC3C,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;QACzB,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YACzB,MAAM,IAAI,GAAG,cAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YACxC,MAAM,OAAO,GAAG,YAAE,CAAC,YAAY,CAAC,cAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC;YACxE,MAAM,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC;QACzB,CAAC;IACH,CAAC;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AAED;;;GAGG;AACH,SAAgB,cAAc,CAAC,IAAY,EAAE,IAA4B;IACvE,MAAM,SAAS,GAAG,YAAY,EAAE,CAAC;IACjC,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;IAC5B,IAAI,CAAC,GAAG,EAAE,CAAC;QACT,MAAM,IAAI,KAAK,CAAC,aAAa,IAAI,aAAa,CAAC,CAAC;IAClD,CAAC;IACD,IAAI,QAAQ,GAAG,GAAG,CAAC;IACnB,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAChD,MAAM,WAAW,GAAG,IAAI,MAAM,CAAC,SAAS,GAAG,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC1D,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;IAClD,CAAC;IACD,OAAO,QAAQ,CAAC;AAClB,CAAC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\exit-email.service.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\n// Load markdown templates from the assets directory (relative to this file)\nconst templatesDir = path.resolve(__dirname, '../../assets/exit_templates');\n\n/**\n * Returns a map of template names to their raw markdown content.\n * Template files should be named `<name>.md` (e.g., `formal.md`).\n */\nexport function getTemplates(): Record<string, string> {\n  const result: Record<string, string> = {};\n  if (!fs.existsSync(templatesDir)) {\n    return result;\n  }\n  const files = fs.readdirSync(templatesDir);\n  for (const file of files) {\n    if (file.endsWith('.md')) {\n      const name = path.basename(file, '.md');\n      const content = fs.readFileSync(path.join(templatesDir, file), 'utf-8');\n      result[name] = content;\n    }\n  }\n  return result;\n}\n\n/**\n * Renders a template by replacing placeholders of the form `{{key}}` with values.\n * Placeholders that are not provided remain unchanged.\n */\nexport function renderTemplate(name: string, data: Record<string, string>): string {\n  const templates = getTemplates();\n  const raw = templates[name];\n  if (!raw) {\n    throw new Error(`Template \"${name}\" not found`);\n  }\n  let rendered = raw;\n  for (const [key, value] of Object.entries(data)) {\n    const placeholder = new RegExp(`{{\\\\s*${key}\\\\s*}}`, 'g');\n    rendered = rendered.replace(placeholder, value);\n  }\n  return rendered;\n}\n"],"version":3}