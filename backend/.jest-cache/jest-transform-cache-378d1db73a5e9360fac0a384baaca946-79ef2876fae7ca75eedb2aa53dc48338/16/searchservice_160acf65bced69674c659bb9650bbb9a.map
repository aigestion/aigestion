{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\search.service.ts","mappings":";;;;;;;;;;;;;;;AAAA,kDAA0B;AAC1B,yCAAuC;AAEvC,qDAA2C;AAC3C,4CAAyC;AAUlC,IAAM,aAAa,GAAnB,MAAM,aAAa;IACP,MAAM,CAAqB;IAC3B,OAAO,GAAG,+BAA+B,CAAC;IAE3D;QACE,IAAI,CAAC,MAAM,GAAG,gBAAG,CAAC,cAAc,CAAC;IACnC,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,KAAa,EAAE,KAAK,GAAG,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACjB,eAAM,CAAC,IAAI,CAAC,sDAAsD,CAAC,CAAC;YACpE,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,IAAI,CAAC;YACH,MAAM,QAAQ,GAAG,MAAM,eAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBAC9C,OAAO,EAAE,IAAI,CAAC,MAAM;gBACpB,KAAK;gBACL,YAAY,EAAE,OAAO;gBACrB,cAAc,EAAE,KAAK;gBACrB,cAAc,EAAE,IAAI;gBACpB,WAAW,EAAE,KAAK;aACnB,CAAC,CAAC;YAEH,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;QACrC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,KAAK,EAAE,0CAA0C,KAAK,EAAE,CAAC,CAAC;YACvE,OAAO,EAAE,CAAC;QACZ,CAAC;IACH,CAAC;CACF,CAAA;AA9BY,sCAAa;wBAAb,aAAa;IADzB,IAAA,sBAAU,GAAE;;GACA,aAAa,CA8BzB","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\search.service.ts"],"sourcesContent":["import axios from 'axios';\nimport { injectable } from 'inversify';\n\nimport { env } from '../config/env.schema';\nimport { logger } from '../utils/logger';\n\nexport interface SearchResult {\n  title: string;\n  url: string;\n  content: string;\n  score: number;\n}\n\n@injectable()\nexport class SearchService {\n  private readonly apiKey: string | undefined;\n  private readonly baseUrl = 'https://api.tavily.com/search';\n\n  constructor() {\n    this.apiKey = env.TAVILY_API_KEY;\n  }\n\n  async search(query: string, limit = 5): Promise<SearchResult[]> {\n    if (!this.apiKey) {\n      logger.warn('TAVILY_API_KEY is missing. Web search will not work.');\n      return [];\n    }\n\n    try {\n      const response = await axios.post(this.baseUrl, {\n        api_key: this.apiKey,\n        query,\n        search_depth: 'smart',\n        include_images: false,\n        include_answer: true,\n        max_results: limit,\n      });\n\n      return response.data.results || [];\n    } catch (error) {\n      logger.error(error, `Error performing web search for query: ${query}`);\n      return [];\n    }\n  }\n}\n"],"version":3}