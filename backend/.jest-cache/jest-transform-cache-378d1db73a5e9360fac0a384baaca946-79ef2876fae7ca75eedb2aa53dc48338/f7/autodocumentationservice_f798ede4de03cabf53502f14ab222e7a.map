{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\auto-documentation.service.ts","mappings":";;;;;;;;;;;;;;;;;;;AAAA,2DAA6B;AAC7B,yCAA+C;AAC/C,gDAAwB;AACxB,oCAAiC;AACjC,4CAAyC;AACzC,6CAAyC;AAGlC,IAAM,wBAAwB,GAA9B,MAAM,wBAAwB;IACU;IAA7C,YAA6C,SAAoB;QAApB,cAAS,GAAT,SAAS,CAAW;IAAG,CAAC;IAErE;;OAEG;IACH,KAAK,CAAC,YAAY,CAAC,UAAkB;QACnC,eAAM,CAAC,IAAI,CAAC,0CAA0C,UAAU,EAAE,CAAC,CAAC;QAEpE,IAAI,CAAC;YACH,MAAM,KAAK,GAAG,MAAM,kBAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACxC,IAAI,OAAO,GAAG,EAAE,CAAC;YAEjB,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC;gBACnB,OAAO,GAAG,MAAM,kBAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;YAClD,CAAC;iBAAM,CAAC;gBACN,MAAM,KAAK,GAAG,MAAM,kBAAE,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;gBAC3C,OAAO,GAAG,uBAAuB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YACtD,CAAC;YAED,MAAM,MAAM,GAAG,2EAA2E,OAAO,wEAAwE,CAAC;YAC1K,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,MAAM,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;YAEnF,OAAO,IAAI,CAAC;QACd,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,oCAAoC,KAAK,EAAE,CAAC,CAAC;YAC1D,OAAO,mCAAmC,CAAC;QAC7C,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,QAAQ,CAAC,UAAkB,EAAE,UAAkB;QACnD,MAAM,WAAW,GAAG,GAAG,cAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC;QAC3D,MAAM,WAAW,GAAG,cAAI,CAAC,IAAI,CAAC,cAAI,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,WAAW,CAAC,CAAC;QAErE,MAAM,kBAAE,CAAC,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;QAC5C,eAAM,CAAC,IAAI,CAAC,oCAAoC,WAAW,EAAE,CAAC,CAAC;IACjE,CAAC;CACF,CAAA;AAxCY,4DAAwB;mCAAxB,wBAAwB;IADpC,IAAA,sBAAU,GAAE;IAEE,WAAA,IAAA,kBAAM,EAAC,aAAK,CAAC,SAAS,CAAC,CAAA;yDAAoB,sBAAS,oBAAT,sBAAS;GADtD,wBAAwB,CAwCpC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\services\\auto-documentation.service.ts"],"sourcesContent":["import fs from 'fs/promises';\nimport { inject, injectable } from 'inversify';\nimport path from 'path';\nimport { TYPES } from '../types';\nimport { logger } from '../utils/logger';\nimport { AIService } from './ai.service';\n\n@injectable()\nexport class AutoDocumentationService {\n  constructor(@inject(TYPES.AIService) private aiService: AIService) {}\n\n  /**\n   * Generates a README/documentation for a specific file or directory.\n   */\n  async generateDocs(targetPath: string): Promise<string> {\n    logger.info(`[AutoDoc] Generating documentation for ${targetPath}`);\n\n    try {\n      const stats = await fs.stat(targetPath);\n      let content = '';\n\n      if (stats.isFile()) {\n        content = await fs.readFile(targetPath, 'utf8');\n      } else {\n        const files = await fs.readdir(targetPath);\n        content = `Directory contains: ${files.join(', ')}`;\n      }\n\n      const prompt = `Generate a technical documentation for the following code or directory: ${content}. Use Markdown format. Focus on architecture, usage, and dependencies.`;\n      const docs = await this.aiService.generateContent(prompt, 'system', 'tech_writer');\n\n      return docs;\n    } catch (error) {\n      logger.error(`[AutoDoc] Error generating docs: ${error}`);\n      return 'Failed to generate documentation.';\n    }\n  }\n\n  /**\n   * Saves generated documentation to a file.\n   */\n  async saveDocs(targetPath: string, docContent: string): Promise<void> {\n    const docFileName = `${path.basename(targetPath)}.docs.md`;\n    const docFilePath = path.join(path.dirname(targetPath), docFileName);\n\n    await fs.writeFile(docFilePath, docContent);\n    logger.info(`[AutoDoc] Saved documentation to ${docFilePath}`);\n  }\n}\n"],"version":3}