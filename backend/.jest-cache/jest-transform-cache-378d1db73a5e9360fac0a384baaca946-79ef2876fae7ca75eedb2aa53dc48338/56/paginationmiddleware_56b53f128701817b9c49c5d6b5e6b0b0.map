{"file":"C:\\Users\\Alejandro\\AIGestion\\backend\\src\\middleware\\pagination.middleware.ts","mappings":";;AAQA,gDAeC;AAtBD,4CAAkD;AAElD;;;;GAIG;AACH,SAAgB,kBAAkB,CAAC,GAAY,EAAE,IAAc,EAAE,IAAkB;IACjF,MAAM,KAAK,GAAG,GAAG,CAAC,KAAY,CAAC;IAC/B,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC;IAC3B,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC;IAC7B,MAAM,IAAI,GAAG,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzD,MAAM,KAAK,GAAG,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAE7D,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC,EAAE,CAAC;QAC5B,OAAO,IAAI,CAAC,IAAI,wBAAe,CAAC,wBAAwB,CAAC,CAAC,CAAC;IAC7D,CAAC;IACD,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE,CAAC;QAC7C,OAAO,IAAI,CAAC,IAAI,wBAAe,CAAC,yBAAyB,CAAC,CAAC,CAAC;IAC9D,CAAC;IACA,GAAW,CAAC,UAAU,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;IAC1C,IAAI,EAAE,CAAC;AACT,CAAC","names":[],"sources":["C:\\Users\\Alejandro\\AIGestion\\backend\\src\\middleware\\pagination.middleware.ts"],"sourcesContent":["import type { NextFunction, Request, Response } from 'express';\nimport { ValidationError } from '../utils/errors';\n\n/**\n * Middleware to validate pagination query parameters.\n * Ensures `page` >= 1 and `limit` between 1 and 100.\n * On success, attaches `{ page, limit }` to `req.pagination`.\n */\nexport function validatePagination(req: Request, _res: Response, next: NextFunction) {\n  const query = req.query as any;\n  const pageRaw = query.page;\n  const limitRaw = query.limit;\n  const page = pageRaw !== undefined ? Number(pageRaw) : 1;\n  const limit = limitRaw !== undefined ? Number(limitRaw) : 10;\n\n  if (isNaN(page) || page < 1) {\n    return next(new ValidationError('Invalid page parameter'));\n  }\n  if (isNaN(limit) || limit < 1 || limit > 100) {\n    return next(new ValidationError('Invalid limit parameter'));\n  }\n  (req as any).pagination = { page, limit };\n  next();\n}\n"],"version":3}